---
title: æ»‘åŠ¨éªŒè¯
categories:
  - []
wordCount: 524
charCount: 11474
imgCount: 1
vidCount: 0
wsCount: 0
cbCount: 0
readTime: About 3 minutes
date: 2023-08-07 17:01:48
tags:
  - vue3
  - enhanced
featured_image:
---

æœ€è¿‘åœ¨å†™ä¸€ä¸ªæ³¨å†Œè¡¨å•çš„éœ€è¦ä¸€ä¸ªæ»‘åŠ¨éªŒè¯æ¨¡å—ã€‚

ğŸ‘¨â€ğŸ’»ç½‘ä¸Šæœå¯»ä¸€ç•ªï¼Œå‘ç°äº†ä¸€ä¸ªç»„ä»¶æ¯”è¾ƒå¥½ç”¨[`vue3-puzzle-vcode`](https://github.com/javaLuo/vue-puzzle-vcode)

----


* ### é…åˆ`ELement-Plus`:  dialog å’Œ form ç»„ä»¶ä½¿ç”¨

#### Loginç»„ä»¶æ§åˆ¶Registerè¡¨å•ç»„ä»¶æ˜¾ç¤º

```vue
//login.vue

<script lang="ts" setup>
import { ref } from 'vue'
import Register from '@/components/Register.vue'
const registerDiaVisible = ref(false)
const openRegisterDia = () => {
	registerDiaVisible.value = true
}
</script>

<template>
...
<Register v-model:registerDiaVisible="registerDiaVisible" />
...
</template>

```

#### Registerç»„ä»¶

ï¼ˆè¡¨å•æ ¡éªŒæˆåŠŸåï¼Œæ‰“å¼€æ»‘åŠ¨éªŒè¯ç»„ä»¶ï¼Œå†æ¬¡æˆåŠŸè°ƒç”¨onSuccessï¼‰

> æ³¨æ„è°ƒæ•´æ»‘åŠ¨éªŒè¯ç»„ä»¶çš„`z-index`ï¼Œé»˜è®¤`el-dialog`ç»„ä»¶å±‚çº§é«˜äº`Vcode`

```vue
<script lang="ts" setup>
import { formPost } from '@/api/request'
import { ElMessage, FormInstance } from 'element-plus'
import { reactive, ref } from 'vue'
import { RegisterForm } from '@/ts/interfaces/login.interface'
import Vcode from 'vue3-puzzle-vcode'
const props = defineProps<{
	registerDiaVisible: boolean
}>()

const emit = defineEmits<{
	'update:registerDiaVisible': [registerDiaVisible: boolean]
}>()

const handleCancel = () => {
	emit('update:registerDiaVisible', false)
}

//è¡¨å•ç»‘å®šçš„å“åº”å¼å¯¹è±¡
const formData = reactive({
	nickName: '',
	realName: '',
	pwd: ''
})

// è¡¨å•çš„å¼•ç”¨å¯¹è±¡
const formRef = ref()
// è¡¨å•æ ¡éªŒ
const rules = reactive({
	nickName: [
		{ required: true, message: 'è¯·è¾“å…¥æ˜µç§°', trigger: 'blur' },
		{ min: 3, max: 10, message: 'è¯·è¾“å…¥3-10ä½æ˜µç§°', trigger: 'blur' }
	],
	realName: [
		{ required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å', trigger: 'blur' },
		{ min: 3, max: 10, message: 'è¯·è¾“å…¥3-10ä½ç”¨æˆ·å', trigger: 'blur' }
	],
	pwd: [
		{ required: true, message: 'è¯·è¾“å…¥å¯†ç ', trigger: 'blur' },
		{ min: 3, max: 10, message: 'è¯·è¾“å…¥3-10ä½å¯†ç ', trigger: 'blur' }
	]
})

const onClose = () => {
	isShow.value = !isShow.value
}
const onSuccess = () => {
	// æ»‘åŠ¨éªŒè¯æˆåŠŸ, å‘é€è¯·æ±‚
	formPost<RegisterForm, string>({
		url: '/user/register',
		data: { ...formData }
	})
		.then(res => {
			isShow.value = !isShow.value
			ElMessage.success(res.data)
		})
		.catch(err => {
			isShow.value = !isShow.value
			ElMessage.error(err.msg)
		})
}

const onSubmit = async (formEl: FormInstance | undefined) => {
	if (!formEl) return
	formEl.validate((valid, fields) => {
		if (valid) {
			isShow.value = !isShow.value
		} else {
			console.log('error submit!', fields)
		}
	})
}

const isShow = ref(false)
</script>

<template>
	<el-dialog
		title="ç”¨æˆ·æ³¨å†Œ"
		v-model="props.registerDiaVisible"
		:before-close="handleCancel"
	>
		<el-form :rules="rules" :model="formData" ref="formRef">
			<el-form-item label="æ˜µç§°:" label-width="120" prop="nickName">
				<el-input v-model="formData.nickName" />
			</el-form-item>
			<el-form-item label="å§“å:" label-width="120" prop="realName">
				<el-input v-model="formData.realName" />
			</el-form-item>
			<el-form-item label="å¯†ç :" label-width="120" prop="pwd">
				<el-input v-model="formData.pwd" show-password />
			</el-form-item>
			<div>
				<el-button @click="handleCancel">å– æ¶ˆ</el-button>
				<el-button type="primary" @click="onSubmit(formRef)">
					ç¡® å®š
				</el-button>
			</div>
		</el-form>
	</el-dialog>
	<Vcode :show="isShow" @success="onSuccess" @close="onClose" />
</template>

<style lang="scss" scoped>
:global(.vue-puzzle-vcode) {
	z-index: 10000;
}
</style>
```



### final

![æ»‘åŠ¨éªŒè¯](https://s2.loli.net/2023/08/07/NnqX4AMTyiCYkuJ.gif)
