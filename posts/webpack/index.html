<!DOCTYPE html>
<!-- <html lang="en,zh-CN,default"> -->
<html lang="en" class="default-theme">


<head>
  <meta name="google-site-verification" content="zgIFkCAsVo7by5gMyjwRsoyBvSYWy-mV8JxZZVPHVdY" />
  <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Levy Liu">







<title>æ¨¡å—åŒ– + webpackæ‰“åŒ… | Levy&#39;s Blog</title>



    <link rel="icon" href="/favicon.ico">



<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Roboto+Mono&display=swap');
</style>


<link rel="stylesheet" href="https://use.typekit.net/dece30.css">



    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    
    <link rel="stylesheet" href="/css/color_mode/classic.css">
    
    <link rel="stylesheet" href="/css/color_mode/dark.css">
    
    <link rel="stylesheet" href="/lib/viewer/viewer.min.css">
    




    <!-- scripts list from _config.yml -->
    
    <script src="/js/menu.js"></script>
    
    <script src="/js/format.js"></script>
    
    <script src="/js/search.js"></script>
    
    <script src="/lib/viewer/viewer.min.js"></script>
    










<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <!-- <div class="image-preview-mask">
    <div class="image-preview-container">
      <div id="img-preview"></div>
    </div>
  </div> -->
  <div class="mask-border">
  </div>

  <div class="wrapper">

    <div class="header">
  <div class="flex-container">
    <div class="header-inner">
      <div class="site-brand-container">
        <a href="/">
          
              Levy&#39;s Blog.ğŸ¦Š
                
        </a>
      </div>
      <div id="menu-btn" class="menu-btn" onclick="toggleMenu()">
        Menu
      </div>
      <nav class="site-nav">
        
          <ul class="menu-list">
            
              <!-- 
              url_foræ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ªè·¯å¾„è½¬æ¢ä¸ºå®Œæ•´çš„URL
              url_for(page.path) å½“å‰é¡µé¢çš„URL
            -->
              <!-- é«˜äº®æ˜¾ç¤º -->
              
                  <li class="menu-item">
                    <a href="/">
                      Home
                    </a>
                  </li>
                  
                    
              <!-- 
              url_foræ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ªè·¯å¾„è½¬æ¢ä¸ºå®Œæ•´çš„URL
              url_for(page.path) å½“å‰é¡µé¢çš„URL
            -->
              <!-- é«˜äº®æ˜¾ç¤º -->
              
                  <li class="menu-item">
                    <a href="/archives/">
                      Archive
                    </a>
                  </li>
                  
                    
              <!-- 
              url_foræ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ªè·¯å¾„è½¬æ¢ä¸ºå®Œæ•´çš„URL
              url_for(page.path) å½“å‰é¡µé¢çš„URL
            -->
              <!-- é«˜äº®æ˜¾ç¤º -->
              
                  <li class="menu-item">
                    <a href="/categories/gallery/">
                      Gallery
                    </a>
                  </li>
                  
                    
              <!-- 
              url_foræ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ªè·¯å¾„è½¬æ¢ä¸ºå®Œæ•´çš„URL
              url_for(page.path) å½“å‰é¡µé¢çš„URL
            -->
              <!-- é«˜äº®æ˜¾ç¤º -->
              
                  <li class="menu-item">
                    <a href="/brat/">
                      BRAT
                    </a>
                  </li>
                  
                    
                      <!-- æœç´¢åŠŸèƒ½ -->
                      
                        <li class="menu-item search-btn">
                          <a href="#">
                            Search
                          </a>
                        </li>
                        


                          <!-- Some tags or posts doesn't have alternative language version, so we don't render language switcher for them -->
                          
          </ul>
          <!-- <button id="theme-toggle">åˆ‡æ¢ä¸»é¢˜</button> -->
      </nav>
    </div>
  </div>
</div>


<script>
  /* const button = document.querySelector('button')
  button.addEventListener('clcik', ()=>{
    document.body.classList.add('')
  }) */
  document.getElementById('theme-toggle').addEventListener('click', function () {
    var body = document.documentElement;
    if (body.classList.contains('dark-theme')) {
      body.className = 'classic-theme';
    } else if (body.classList.contains('classic-theme')) {
      body.className = 'default-theme';
    } else {
      body.className = 'dark-theme';
    }
  });
</script>

      <div class="main">
        <div class="flex-container">
          <article id="post">
  
    <div class="post-head">
    
    <div class="post-info">
        <div class="tag-list">
            
        </div>
        <div class="post-title">

            
                æ¨¡å—åŒ– + webpackæ‰“åŒ…
                    
        </div>
        <span class="post-date">
            Apr 22, 2024
        </span>
        <span class="post-word-count">
            3661 words / About 20 minutes

            <span class="post-word-count-tooltip">Only English content is counted</sapn>
        </span>

        
    </div>
    <div class="post-img">
        
                <div class="h-line-primary"></div>
                
    </div>
</div>
    <div class="post-content">
    <!-- <-page.content -->
    <div class="toc"></div>
<div class="post-body">
    <p>ã€Œæ¨¡å—åŒ–ã€æ˜¯æ€æƒ³</p>
<p><img src="https://s2.loli.net/2023/05/08/cqUElmXNyaRPnsG.png" alt="å†…å®¹æ¦‚è¦" /></p>
<h2 id="æ¨¡å—åŒ–çš„æ¼”å˜è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#æ¨¡å—åŒ–çš„æ¼”å˜è¿‡ç¨‹"></a> <mark>æ¨¡å—åŒ–çš„æ¼”å˜è¿‡ç¨‹</mark></h2>
<blockquote>
<p>éƒ½æ˜¯ä¾é scriptæ ‡ç­¾åŠ è½½æ¨¡å—ï¼Œä¸èƒ½ä»£ç æ§åˆ¶åŠ è½½</p>
</blockquote>
<ol>
<li>
<h4 id="æ–‡ä»¶åˆ’åˆ†æ–¹å¼å…¨é çº¦å®š"><a class="markdownIt-Anchor" href="#æ–‡ä»¶åˆ’åˆ†æ–¹å¼å…¨é çº¦å®š"></a> æ–‡ä»¶åˆ’åˆ†æ–¹å¼ï¼ˆå…¨é çº¦å®šï¼‰</h4>
<p>æ¯ä¸€ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œå­˜å…¥çš„çŠ¶æ€æ•°æ®å’ŒåŠŸèƒ½å‡½æ•°</p>
<p>script srcå¼•ç”¨</p>
<p>ä½¿ç”¨å‡½æ•°å’Œå…¨å±€å˜é‡</p>
</li>
</ol>
<p>ç¼ºç‚¹ï¼š æ±¡æŸ“å…¨å±€å˜é‡ã€å‘½åå†²çªã€ç®¡ç†æ¨¡å—ä¹‹å‰ä¾èµ–å…³ç³»</p>
<ol start="2">
<li>
<h4 id="å‘½åç©ºé—´æ–¹å¼"><a class="markdownIt-Anchor" href="#å‘½åç©ºé—´æ–¹å¼"></a> å‘½åç©ºé—´æ–¹å¼</h4>
<p>å°†æ¯ä¸ªæ¨¡å—å°è£…åˆ°ä¸€ä¸ª<u>å¯¹è±¡</u>ä¸­ï¼Œä¾é nameå±æ€§å‘½åæ¨¡å—</p>
</li>
</ol>
<p>ç¼ºç‚¹ï¼šæ²¡æœ‰ç§æœ‰ç©ºé—´ï¼Œå¯ä»¥åœ¨å¤–è¢«ä¿®æ”¹ã€ä¾èµ–å…³ç³»</p>
<ol start="3">
<li>
<h4 id="iife"><a class="markdownIt-Anchor" href="#iife"></a> IIFE</h4>
<p>å°†æ¨¡å—ç”¨<u>IIFEå°è£…</u>ï¼Œå°†æ‰€éœ€è¦æš´éœ²çš„æ•°æ®æŒ‚è½½åœ¨<u>å…¨å±€å¯¹è±¡windowâ€¦</u>ä¸Š</p>
</li>
</ol>
<p>â€‹	  é€šè¿‡é—­åŒ…çš„æ–¹å¼ï¼Œç§æœ‰å˜é‡ã€å‚æ•°ä¼ é€’ï¼Œä¾èµ–å…³ç³»ï¼ˆJquery $ï¼‰</p>
<h2 id="æ¨¡å—åŒ–è§„èŒƒ"><a class="markdownIt-Anchor" href="#æ¨¡å—åŒ–è§„èŒƒ"></a> <mark>æ¨¡å—åŒ–è§„èŒƒ</mark></h2>
<h3 id="æ¨¡å—åŒ–è§„èŒƒçš„å‡ºç°"><a class="markdownIt-Anchor" href="#æ¨¡å—åŒ–è§„èŒƒçš„å‡ºç°"></a> æ¨¡å—åŒ–è§„èŒƒçš„å‡ºç°</h3>
<h4 id="commonjs"><a class="markdownIt-Anchor" href="#commonjs"></a> CommonJS</h4>
<blockquote>
<p>nodeæå‡º</p>
<p>åŒæ­¥åŠ è½½</p>
</blockquote>
<ul>
<li>ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—</li>
<li>æ¯ä¸ªæ¨¡å—éƒ½æ˜¯æœ‰ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸ</li>
<li>é€šè¿‡module.exportså¯¼å‡ºæ¨¡å—ã€requireå‡½æ•°è½½å…¥æ¨¡å—</li>
</ul>
<h4 id="amdasynchronous-module-definition-å¼‚æ­¥æ¨¡å—å®šä¹‰è§„èŒƒ"><a class="markdownIt-Anchor" href="#amdasynchronous-module-definition-å¼‚æ­¥æ¨¡å—å®šä¹‰è§„èŒƒ"></a> AMD(Asynchronous Module Definition) å¼‚æ­¥æ¨¡å—å®šä¹‰è§„èŒƒ</h4>
<blockquote>
<p>ç¤¾åŒºæå‡º</p>
<p>Require.jså®ç°äº†AMDè§„èŒƒ</p>
<p>æ¨¡å—åŠ è½½å™¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å®šä¹‰ä¸€ä¸ªæ¨¡å— */</span></span><br><span class="line"><span class="comment">// å‚æ•° å®šä¹‰æ¨¡å—åã€å¼•ç”¨ä¾èµ–æ–‡ä»¶ã€å‡½æ•°ï¼ˆä¾èµ–æ–‡ä»¶å¯¼å‡ºçš„æˆå‘˜ï¼‰</span></span><br><span class="line"><span class="title function_">define</span>(<span class="string">&#x27;muduleName&#x27;</span>,[<span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;./moduleA&#x27;</span>],<span class="keyword">function</span>(<span class="params">$, moduleA</span>)&#123;</span><br><span class="line">  <span class="comment">// å¯¼å‡ºæˆå‘˜</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">animate</span>(&#123;<span class="attr">margin</span>:<span class="string">&#x27;20px&#x27;</span>&#125;)</span><br><span class="line">    <span class="title function_">moduleA</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è½½å…¥ä¸€ä¸ªæ¨¡å— */</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">&#x27;moduleName&#x27;</span>],<span class="keyword">function</span>(<span class="params"><span class="variable language_">module</span></span>)&#123;</span><br><span class="line">  <span class="variable language_">module</span>.<span class="title function_">start</span>()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//è‡ªåŠ¨åˆ›å»ºscriptæ ‡ç­¾</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ·˜å®æ¨å‡ºSea.js å®ç°çš„CMDæ¨¡å—ï¼Œæ—¨åœ¨ç”¨CommonJSçš„æ–¹å¼å†™AMDï¼Œåç»­è¢«require.jså…¼å®¹</p>
</blockquote>
<h3 id="æ¨¡å—åŒ–æ ‡å‡†è§„èŒƒ"><a class="markdownIt-Anchor" href="#æ¨¡å—åŒ–æ ‡å‡†è§„èŒƒ"></a> æ¨¡å—åŒ–æ ‡å‡†è§„èŒƒ</h3>
<p>æµè§ˆå™¨ï¼šES Moduleã€nodeï¼šCommonJS</p>
<h4 id="es-module-ç‰¹æ€§2014å¹´"><a class="markdownIt-Anchor" href="#es-module-ç‰¹æ€§2014å¹´"></a> ES Module ç‰¹æ€§ï¼ˆ2014å¹´ï¼‰</h4>
<p>é€šè¿‡ç»™scriptæ ‡ç­¾æ·»åŠ <code>type=&quot;module&quot;</code>ï¼Œä»¥ESMæ ‡å‡†æ‰§è¡ŒJSä»£ç </p>
<ul>
<li>è‡ªåŠ¨å¼€å¯<strong>ä¸¥æ ¼æ¨¡å¼</strong></li>
<li>æ¯ä¸ªmoduleå•ç‹¬ç§æœ‰ä½œç”¨åŸŸ</li>
<li>é€šè¿‡CORSæ–¹å¼è¯·æ±‚å¤–éƒ¨çš„JSæ¨¡å—ï¼ˆå¤–éƒ¨å¿…é¡»æ”¯æŒCORSï¼Œè¦åŠ å…¥CORSå“åº”å¤´ï¼‰</li>
<li>å»¶è¿Ÿæ‰§è¡Œè„šæœ¬ <code>defer</code></li>
</ul>
<h4 id="es-module-å¯¼å…¥å’Œå¯¼å‡º"><a class="markdownIt-Anchor" href="#es-module-å¯¼å…¥å’Œå¯¼å‡º"></a> ES Module å¯¼å…¥å’Œå¯¼å‡º</h4>
<p>å¯¼å‡ºå¯¼å…¥éƒ½å¯ as é‡å‘½åï¼Œ</p>
<p><strong><code>export</code></strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; a, b &#125; <span class="comment">//è¿™ä¸ª&#123;&#125; ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯å›ºå®šå†™æ³•</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> xxx <span class="comment">//xxxå¯ä»¥æ˜¯ä¸€ä¸ªå˜é‡æˆ–è€…å€¼ï¼Œ</span></span><br></pre></td></tr></table></figure>
<p><strong><code>import</code></strong></p>
<ul>
<li>
<p>å¼•ç”¨æ–‡ä»¶è·¯å¾„</p>
<ul>
<li>ä¸èƒ½çœç•¥<code>.js</code>æ–‡ä»¶åç¼€ã€ä¹Ÿä¸èƒ½ç›´æ¥çœç•¥è®¿é—®<code>index.js</code>ï¼Œåç»­é€šè¿‡<strong>æ‰“åŒ…å·¥å…·</strong>å¯ä»¥è¿™æ ·åš</li>
<li>ä¸èƒ½ç›´æ¥è½½å…¥æ–‡ä»¶åï¼ˆ<code>from 'moduleA.js'</code>ï¼‰ï¼Œå› ä¸ºè¿™æ ·ä¼šè¢«è¯†åˆ«æˆç¬¬ä¸‰æ–¹åº“</li>
<li>å¯ä»¥è½½å…¥ç›¸å¯¹è·¯å¾„(ä¸èƒ½çœç•¥<code>./</code>)ã€ç»å¯¹è·¯å¾„ã€å®Œæ•´çš„urlè·¯å¾„ï¼ˆå¼•ç”¨cdnæ¨¡å—ï¼‰</li>
</ul>
</li>
<li>
<p>åªå¯¼å…¥ä¸å–å€¼</p>
<ul>
<li>
<pre class="highlight"><code class="js"><span class="keyword">import</span> &#123;&#125; form <span class="string">&#x27;./moduleA.js&#x27;</span>
<span class="keyword">import</span> <span class="string">&#x27;./moduleA.js&#x27;</span> <span class="comment">//ç®€å†™æ–¹å¼</span>
&lt;!--codeï¿¼<span class="number">2</span>--&gt;

</code></pre>
</li>
</ul>
</li>
<li>
<p>åŠ¨æ€åŠ è½½æ¨¡å—ï¼ˆimportå‡½æ•°ï¼‰</p>
<ul>
<li>
<p>æ™®é€š<code>import from</code> åªèƒ½ä½œç”¨äºæœ€é¡¶å±‚ä½œç”¨åŸŸ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./moduleA.js&#x27;</span>) </span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>åŒæ—¶é»˜è®¤å’Œåˆ†åˆ«å¯¼å‡ºæ—¶</p>
<ul>
<li>
<pre class="highlight"><code class="js"><span class="comment">//å¯¼å‡º</span>
<span class="keyword">export</span> &#123;a, b&#125;
<span class="keyword">export</span> <span class="keyword">default</span> <span class="string">&#x27;1234&#x27;</span>

<span class="comment">//å¯¼å…¥</span>
<span class="keyword">import</span> &#123;a, b, <span class="keyword">default</span> <span class="keyword">as</span> str&#125; <span class="keyword">from</span> <span class="string">&#x27;./moduleA.js&#x27;</span>
<span class="keyword">import</span> str, &#123;a, b&#125; <span class="keyword">from</span> <span class="string">&#x27;./moduleA.js&#x27;</span>  <span class="comment">//ç®€å†™ </span>
&lt;!--codeï¿¼<span class="number">4</span>--&gt;



</code></pre>
</li>
</ul>
</li>
</ul>
<h4 id="es-module-æµè§ˆå™¨ç¯å¢ƒå…¼å®¹"><a class="markdownIt-Anchor" href="#es-module-æµè§ˆå™¨ç¯å¢ƒå…¼å®¹"></a> ES Module æµè§ˆå™¨ç¯å¢ƒå…¼å®¹</h4>
<blockquote>
<p>è¿™ç§æ–¹å¼åªé€‚åˆ<font color=red>å¼€å‘é˜¶æ®µ</font>ï¼Œç”Ÿäº§é˜¶æ®µä¸ç”¨ã€‚åŠ¨æ€è§£æè„šæœ¬ï¼Œæ€§èƒ½å·®</p>
<p>æœ€å¥½çš„æ–¹å¼è¿˜æ˜¯åœ¨æ‰§è¡Œå‰ï¼Œå°±å°†ä»£ç ç¼–è¯‘å¥½</p>
</blockquote>
<p>æœ‰äº›æµè§ˆå™¨ä¸æ”¯æŒç›´æ¥è§£æes6</p>
<p><a target="_blank" rel="noopener" href="https://github.com/ModuleLoader/browser-es-module-loader">es-module-loader</a>ä»£ç è¯»å‡ºæ¥ï¼Œäº¤ç»™babelè½¬æ¢</p>
<p>ä¸æ”¯æŒpromiseï¼Œç”¨<code>promise-ployfill</code></p>
<p>å€ŸåŠ©<code>script</code>æ ‡ç­¾çš„<font color=red><code>nomodule</code></font>å±æ€§ï¼Œåªåœ¨ä¸æ”¯æŒçš„æµè§ˆå™¨è¿è¡Œè½¬æ¢è„šæœ¬</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">nomodule</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/browser-es-module-loader@0.4.1/dist/babel-browser-build.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">nomodule</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/browser-es-module-loader@0.4.1/dist/browser-es-module-loader.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªæ¨¡å—&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="es-module-åœ¨nodeä¸­ä½¿ç”¨"><a class="markdownIt-Anchor" href="#es-module-åœ¨nodeä¸­ä½¿ç”¨"></a> ES Module åœ¨Nodeä¸­ä½¿ç”¨</h4>
<p>åœ¨nodeç¯å¢ƒä¸‹ï¼Œesmæ–‡ä»¶åç¼€ä¸º<code>.mjs</code> ,ä¸å¤ªæ¨èä½¿ç”¨</p>
<p><u>å®˜æ–¹å†…ç½®æ¨¡å—</u>åšäº†å…¼å®¹ï¼Œå¯ä»¥é»˜è®¤å…¨éƒ¨å¯¼å…¥ï¼Œä¹Ÿå¯ä»¥åˆ†åˆ«å¯¼å…¥</p>
<p>ç¬¬ä¸‰æ–¹åº“ä¸€èˆ¬éƒ½æ˜¯é»˜è®¤å¯¼å‡ºï¼Œæ‰€ä»¥ä¸èƒ½import {xx} from â€˜.module.jsâ€™</p>
<h4 id="es-module-åœ¨nodeä¸­ä¸-commonjsæ¨¡å—äº¤äº’"><a class="markdownIt-Anchor" href="#es-module-åœ¨nodeä¸­ä¸-commonjsæ¨¡å—äº¤äº’"></a> ES Module åœ¨Nodeä¸­ä¸ CommonJSæ¨¡å—äº¤äº’</h4>
<p><font color=red> esmå¯ä»¥è½½å…¥cjsæ¨¡å—</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// esm.ejs</span></span><br><span class="line"><span class="comment">// åªèƒ½é»˜è®¤å¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> mod <span class="keyword">from</span> <span class="string">&#x27;./cjs.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mod)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ********************* //</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//cjs.js</span></span><br><span class="line"><span class="comment">/* module.exports = &#123;</span></span><br><span class="line"><span class="comment">    foo: &#x27;cjsä¸­çš„foo&#x27;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">foo</span> = <span class="string">&#x27;cjsä¸­çš„foo&#x27;</span></span><br></pre></td></tr></table></figure>
<p>cjsä¸èƒ½è½½å…¥esmæ¨¡å—ï¼ˆåœ¨åŸç”Ÿnodeç¯å¢ƒä¸­ï¼‰</p>
<p>nvm use ç‰ˆæœ¬å·</p>
<h4 id="es-moduleåœ¨nodeæ–°ç‰ˆæœ¬ä¸­çš„æ”¯æŒ"><a class="markdownIt-Anchor" href="#es-moduleåœ¨nodeæ–°ç‰ˆæœ¬ä¸­çš„æ”¯æŒ"></a> ES Moduleåœ¨Nodeæ–°ç‰ˆæœ¬ä¸­çš„æ”¯æŒ</h4>
<p><code>package.json</code> æ–°å¢<code>&quot;type&quot;:&quot;module&quot;</code> å­—æ®µï¼Œnodeä¸­<code>.js</code>æ–‡ä»¶æ¨¡å—å°±è®¾å®šä¸ºESM</p>
<p>æ­¤æ—¶è¿˜éœ€ç”¨CommonJSæ¨¡å—ï¼Œåç¼€åä¸º<code>.cjs</code></p>
<h4 id="es-module-åœ¨nodeä¸­-babelå…¼å®¹æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#es-module-åœ¨nodeä¸­-babelå…¼å®¹æ–¹æ¡ˆ"></a> ES Module åœ¨Nodeä¸­ Babelå…¼å®¹æ–¹æ¡ˆ</h4>
<p>Babel jsç¼–è¯‘å™¨ï¼Œä½¿ç”¨æ–°ç‰¹æ€§ä»£ç  =(ç¼–è¯‘æˆ)=ã€‹å½“å‰ç¯å¢ƒæ”¯æŒçš„ä»£ç </p>
<h5 id="ç”¨presetæ’ä»¶é›†åˆ"><a class="markdownIt-Anchor" href="#ç”¨presetæ’ä»¶é›†åˆ"></a> ç”¨presetæ’ä»¶é›†åˆ</h5>
<p>ä¸‹è½½æ‰€éœ€æ¨¡å—yarn add <code>@babel/node</code> <code>@babel/core</code> <code>@babel/preset-env </code> --dev(ä½œä¸ºå¼€å‘ä¾èµ–)</p>
<p>è¿è¡Œ <code>yarn babel-node xxx.js --presets=preset-env</code>  (è¿˜æœ‰å…¶ä»–preset)</p>
<ul>
<li>
<p>å¦‚æœä¸æƒ³æ¯æ¬¡è¿è¡Œéƒ½æ·»åŠ â€“presets=xxxã€‚é‚£ä¹ˆåœ¨æ–‡ä»¶ä¸‹æ–°å»º<code>.babelrc</code>æ–‡ä»¶ï¼Œä¸­æ·»åŠ </p>
<ul>
<li>
<pre class="highlight"><code class="json"><span class="punctuation">&#123;</span>
  <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;@babel/preset-env&quot;</span><span class="punctuation">]</span>
<span class="punctuation">&#125;</span>
&lt;!--codeï¿¼<span class="number">7</span>--&gt;

</code></pre>
</li>
</ul>
</li>
</ul>
<p>è¿è¡Œ <code>yarn babel-node xx.js</code></p>
<h2 id="æ¨¡å—åŒ–æ‰“åŒ…å·¥å…·"><a class="markdownIt-Anchor" href="#æ¨¡å—åŒ–æ‰“åŒ…å·¥å…·"></a> <mark>æ¨¡å—åŒ–æ‰“åŒ…å·¥å…·</mark></h2>
<blockquote>
<p>ESM å­˜åœ¨ç¯å¢ƒå…¼å®¹é—®é¢˜</p>
<p>æ¨¡å—æ–‡ä»¶è¿‡å¤šï¼Œç½‘ç»œè¯·æ±‚é¢‘ç¹ï¼Œå½±å“å·¥ä½œæ•ˆç‡</p>
<p>æ‰€æœ‰å‰ç«¯èµ„æº(html, cssâ€¦)éƒ½éœ€è¦æ¨¡å—åŒ–</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">æ–°ç‰¹æ€§ä»£ç ç¼–è¯‘</th>
<th style="text-align:center">æ¨¡å—åŒ–JSæ‰“åŒ…</th>
<th style="text-align:center">æ”¯æŒä¸åŒç±»å‹çš„èµ„æºæ¨¡å—</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://s2.loli.net/2023/05/08/xNJsOmDZSQ24Cka.png" alt="image-20230504103526814" /></td>
<td style="text-align:center"><img src="https://s2.loli.net/2023/05/08/Yoq8ByXEDLQFJw1.png" alt="image-20230504103539317" /></td>
<td style="text-align:center"><img src="https://s2.loli.net/2023/05/08/o5xhIYfqEnHteFs.png" alt="image-20230504103918557" /></td>
</tr>
</tbody>
</table>
<p>æ¨¡å—æ‰“åŒ…å·¥å…·ï¼ˆModule Bundlerï¼‰</p>
<p><code>webpack</code> <code>parcel</code> <code>rollup</code></p>
<p>æ‰“åŒ…å·¥å…·çš„æ¨¡å—åŒ–æ˜¯æŒ‡å¯¹<font color=red>å‰ç«¯æ•´ä½“çš„æ¨¡å—åŒ–</font>ï¼Œå¹¶ä¸å•æŒ‡JSçš„æ¨¡å—åŒ–</p>
<h3 id="webpack"><a class="markdownIt-Anchor" href="#webpack"></a> <code>webpack</code></h3>
<p>æ¨¡å—åŠ è½½å™¨loader ï¼ˆä»£ç è½¬æ¢ï¼‰</p>
<p>ä»£ç æ‹†åˆ† code splitting</p>
<p>èµ„æºæ¨¡å— assets moduleï¼Œä»¥æ¨¡å—åŒ–çš„æ–¹å¼å¼•å…¥ä»»ä½•èµ„æºæ–‡ä»¶</p>
<p><code>yarn init --yes</code></p>
<p><code>yarn add webpack webpack-cli --dev</code></p>
<p><code>yarn webpack</code> (é»˜è®¤ æ‰“åŒ…srcä¸‹çš„index.jsæ–‡ä»¶)</p>
<h4 id="é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#é…ç½®æ–‡ä»¶"></a> é…ç½®æ–‡ä»¶</h4>
<p>é»˜è®¤æ‰“åŒ… <code>src/index.js</code></p>
<p><code>webpack.config.js</code> è¿è¡Œåœ¨nodeç¯å¢ƒä¸­çš„CommonJSæ¨¡å—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>, <span class="comment">//æŒ‡å®šå…¥å£æ–‡ä»¶</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>, <span class="comment">//æŒ‡å®šæ‰“åŒ…åçš„æ–‡ä»¶å</span></span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;output&#x27;</span>) <span class="comment">//å¿…é¡»ä¸ºç»å¯¹è·¯å¾„</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å·¥ä½œæ¨¡å¼"><a class="markdownIt-Anchor" href="#å·¥ä½œæ¨¡å¼"></a> å·¥ä½œæ¨¡å¼</h4>
<p>æ­£å¸¸è¿è¡Œwebpackå‡ºç°è­¦å‘Šâš ï¸</p>
<blockquote>
<p>WARNING in configuration<br />
The â€˜modeâ€™ option has not been set, webpack will fallback to â€˜productionâ€™ for this value.<br />
<strong>Set â€˜modeâ€™ option to â€˜developmentâ€™ or â€˜productionâ€™ to enable defaults for each environment.</strong><br />
You can also set it to â€˜noneâ€™ to disable any default behavior. Learn more: <a target="_blank" rel="noopener" href="https://webpack.js.org/configuration/mode/">https://webpack.js.org/configuration/mode/</a></p>
</blockquote>
<h5 id="prodcuction-ç”Ÿäº§é»˜è®¤æ¨¡å¼"><a class="markdownIt-Anchor" href="#prodcuction-ç”Ÿäº§é»˜è®¤æ¨¡å¼"></a> prodcuction ç”Ÿäº§é»˜è®¤æ¨¡å¼</h5>
<p>yarn webpack</p>
<p>â€‹	è‡ªåŠ¨ä¼˜åŒ–æ‰“åŒ…ç»“æœ</p>
<h5 id="å¼€å‘æ¨¡å¼"><a class="markdownIt-Anchor" href="#å¼€å‘æ¨¡å¼"></a> å¼€å‘æ¨¡å¼</h5>
<p>yarn webpack --mode development ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ·»åŠ è°ƒè¯•è¿‡ç¨‹ä¸­è¾…åŠ©</p>
<h5 id="none-æ¨¡å¼"><a class="markdownIt-Anchor" href="#none-æ¨¡å¼"></a> none æ¨¡å¼</h5>
<p>yarn webpack --mode none æœ€åŸå§‹</p>
<p>æˆ–è€…åœ¨<code>webpack.config.js</code>æ–‡ä»¶æ·»åŠ <code>mode: 'development'</code>å±æ€§ï¼Œå°±ä¸éœ€è¦åœ¨<code>yarn webpack --mode å‚æ•°</code></p>
<h4 id="èµ„æºæ¨¡å—åŠ è½½"><a class="markdownIt-Anchor" href="#èµ„æºæ¨¡å—åŠ è½½"></a> èµ„æºæ¨¡å—åŠ è½½</h4>
<p>webpacké»˜è®¤åªå¤„ç†jsæ–‡ä»¶</p>
<p>ä¸åŒç±»å‹çš„èµ„æºæ–‡ä»¶ï¼Œéœ€è¦ä¸åŒç±»å‹çš„åŠ è½½å™¨loader</p>
<h5 id="åŠ è½½cssèµ„æº"><a class="markdownIt-Anchor" href="#åŠ è½½cssèµ„æº"></a> åŠ è½½cssèµ„æº</h5>
<p><code>yarn add css-loader </code> <em><strong>å°†cssæ–‡ä»¶è½¬ä¸ºjsæ–‡ä»¶æ¨¡å—</strong></em></p>
<p><code>yarn add style-loader</code> å°†css-loaderè½¬æ¢çš„cssæ–‡ä»¶ä»¥styleæ ‡ç­¾è¿½åŠ åˆ°é¡µé¢ä¸Š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/main.css&#x27;</span>,<span class="comment">//æ‰“åŒ…cssæ–‡ä»¶</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;output&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/.css$/</span>, <span class="comment">//æ‰“åŒ…æ–‡ä»¶åç¼€</span></span><br><span class="line">                <span class="attr">use</span>: [</span><br><span class="line">                    <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">                ]<span class="comment">//useæ¨¡å—æ˜¯ä»åå¾€å‰ç›´è¡Œï¼Œå·¦ç§»css-loaderè¦å¸è½½åé¢</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em><strong>loaderæ˜¯webpackçš„æ ¸å¿ƒç‰¹æ€§ï¼Œé€šè¿‡ä¸åŒçš„loaderåŠ è½½ä¸åŒç±»å‹èµ„æº</strong></em></p>
<h6 id="å¯¼å…¥importèµ„æºæ¨¡å—"><a class="markdownIt-Anchor" href="#å¯¼å…¥importèµ„æºæ¨¡å—"></a> <mark>å¯¼å…¥importèµ„æºæ¨¡å—</mark></h6>
<p>æ‰“åŒ…å…¥å£â€”&gt; è¿è¡Œå…¥å£</p>
<p>jsé©±åŠ¨é©±åŠ¨æ•´ä¸ªå‰ç«¯ä¸šåŠ¡</p>
<table>
<thead>
<tr>
<th>jsæ–‡ä»¶ä½œä¸ºæ‰“åŒ…çš„å…¥å£ ï¼Œç„¶ååœ¨jsæ¨¡å—ä¸­é€šè¿‡importå¼•å…¥cssæ–‡ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td><a target="_blank" rel="noopener" href="//main.js">//main.js</a> <br /><code>import './xxx.css'</code> <code>import './yyy.css'</code></td>
</tr>
<tr>
<td><img src="https://s2.loli.net/2023/05/08/8BQZXKWvAbUh6Df.png" alt="image-20230504140630685" style="zoom:100%;" /></td>
</tr>
</tbody>
</table>
<p><em><strong>æ ¹æ®ä»£ç çš„éœ€è¦åŠ¨æ€å¯¼å…¥èµ„æº</strong></em></p>
<p><font color=red>é€»è¾‘åˆç†ï¼Œjséœ€è¦èµ„æºæ–‡ä»¶</font></p>
<p><font color=red>ç¡®ä¿ä¸Šçº¿èµ„æºæ–‡ä»¶ä¸ç¼ºå¤±</font></p>
<blockquote>
<p>ä»£ç æ›´æ˜“ç»´æŠ¤ï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚</p>
<p>loader ç¼–è¯‘è½¬æ¢å‹ç¼©</p>
<p>Webpacké™æ€èµ„æºä¼˜åŒ–ï¼Œåˆ†æä¾èµ–å…³ç³»æ˜¯å¦å¿…é¡»ï¼Œtree-shakingï¼Œä¼˜åŒ–ä»£ç </p>
</blockquote>
<h5 id="æ–‡ä»¶èµ„æºåŠ è½½å™¨-file-loader"><a class="markdownIt-Anchor" href="#æ–‡ä»¶èµ„æºåŠ è½½å™¨-file-loader"></a> æ–‡ä»¶èµ„æºåŠ è½½å™¨ file-loader</h5>
<p><code>yarn add file-loader</code> æ‹·è´ç‰©ç†æ–‡ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;output&#x27;</span>), <span class="comment">//é»˜è®¤æ˜¯dist</span></span><br><span class="line">        <span class="comment">// publicPath: &#x27;output/&#x27;  //é»˜è®¤</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/.jpeg$/</span>,</span><br><span class="line">                <span class="attr">use</span>: <span class="string">&#x27;file-loader&#x27;</span> <span class="comment">//é…ç½®file-loader</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®é…ç½®æ–‡ä»¶çš„åŒ¹é…åˆ°å¯¹åº”çš„æ–‡ä»¶åŠ è½½å™¨</p>
<p>æ–‡ä»¶åŠ è½½å™¨å°†å¯¼å…¥çš„æ–‡ä»¶<strong>æ‹·è´åˆ°è¾“å‡ºçš„ç›®å½•</strong>ï¼Œ</p>
<p>å°†è¿™ä¸ªæ‹·è´çš„<strong>æ–‡ä»¶è·¯å¾„</strong>ä½œä¸ºè¿™ä¸ª<strong>æ¨¡å—çš„è¿”å›å€¼</strong>è¿”å›ï¼Œæ–‡ä»¶å°±è¢«å‘å¸ƒå‡ºæ¥ï¼Œ</p>
<p>å¯ä»¥é€šè¿‡æ¨¡å—çš„å¯¼å‡ºæˆå‘˜æ‹¿åˆ°è¿™ä¸ªèµ„æºçš„è®¿é—®è·¯å¾„</p>
<p><img src="https://s2.loli.net/2023/05/08/7BHleROkNcDWFvd.png" alt="image-20230504143659882" /></p>
<h5 id="url-loader"><a class="markdownIt-Anchor" href="#url-loader"></a> url-loader</h5>
<p>DataUrls è¿™ä¸ªå°±å·²ç»ä»£è¡¨äº†æ–‡ä»¶</p>
<p>å°†å°å‹æ–‡ä»¶ï¼ˆå¦‚å›¾ç‰‡ã€éŸ³é¢‘ç­‰ï¼‰ç›´æ¥åµŒå…¥åˆ° HTMLã€CSS æˆ– JavaScript æ–‡ä»¶ä¸­ï¼Œè€Œä¸å¿…å†é€šè¿‡ç½‘ç»œè¯·æ±‚è·å–è¿™äº›æ–‡ä»¶</p>
<table>
<thead>
<tr>
<th><img src="https://s2.loli.net/2023/05/08/FOMloWnvTq9Hc4Z.png" alt="image-20230504144417780" /></th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://s2.loli.net/2023/05/08/KoEDmiLzx87gRp4.png" alt="image-20230504144448616" /></td>
</tr>
<tr>
<td><img src="https://s2.loli.net/2023/05/08/A2gP89vCDUpJBRM.png" alt="image-20230504144533002" /></td>
</tr>
<tr>
<td><img src="https://s2.loli.net/2023/05/08/cUkDwi7jH8e9XSC.png" alt="image-20230505105909806" /></td>
</tr>
</tbody>
</table>
<p>é€šè¿‡url-loaderå®ç°DataUrls</p>
<p><code>yarn add url-loader</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/.jpeg$/</span>,</span><br><span class="line">                <span class="comment">//use: &#x27;url-loader&#x27;,</span></span><br><span class="line">              	<span class="attr">use</span>: &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>:&#123;</span><br><span class="line">                        <span class="attr">limit</span>: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">//10KB,åªå¤„ç†&lt;=10KBï¼Œçš„æ–‡ä»¶,è¶…è¿‡å°±å•ç‹¬æå–å­˜æ”¾</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>url-loaderä¸ä¼šåƒfile-loaderåœ¨è¾“å‡ºæ–‡ä»¶å¤¹ï¼Œè€Œæ˜¯ç”Ÿæˆå¯¼å‡ºæ–‡ä»¶ï¼ˆåœ¨æ‰“åŒ…æ–‡ä»¶ä¸­ï¼‰</p>
<p style="color:red;">å°æ–‡ä»¶ä½¿ç”¨DataUrlsçš„æ–¹å¼ï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•°
  <br>å¤§æ–‡ä»¶å•ç‹¬æå–å­˜æ”¾ï¼Œæé«˜åŠ è½½é€Ÿåº¦</p>éœ€è¦åŒæ—¶å®‰è£…file-loaderå’Œurl-loaderæ¨¡å—
<h4 id="å¸¸ç”¨åŠ è½½å™¨åˆ†ç±»"><a class="markdownIt-Anchor" href="#å¸¸ç”¨åŠ è½½å™¨åˆ†ç±»"></a> å¸¸ç”¨åŠ è½½å™¨åˆ†ç±»</h4>
<table>
<thead>
<tr>
<th>ç¼–è¯‘è½¬æ¢ç±»</th>
<th>æ–‡ä»¶æ“ä½œç±»</th>
<th>ä»£ç æ£€æŸ¥ç±»</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td>ç»Ÿä¸€ä»£ç é£æ ¼ï¼Œæé«˜ä»£ç è´¨é‡</td>
</tr>
<tr>
<td><img src="https://s2.loli.net/2023/05/08/J49vgDNeiHhGoy7.png" alt="image-20230504150809959" /></td>
<td><img src="https://s2.loli.net/2023/05/08/NXHYKzByxDGSv2A.png" alt="image-20230504150857447" /></td>
<td><img src="https://s2.loli.net/2023/05/08/8puCoUVwRJmiWgh.png" alt="image-20230504150924725" /></td>
</tr>
</tbody>
</table>
<h4 id="webpackä¸es2015-babel-loader"><a class="markdownIt-Anchor" href="#webpackä¸es2015-babel-loader"></a> webpackä¸ES2015 babel-loader</h4>
<p>å› ä¸ºæ‰“åŒ…éœ€è¦ï¼Œå¤„ç†exportå’Œimport</p>
<p>åˆ©ç”¨babelä¸­çš„é¢„è®¾æ’ä»¶ç¼–è¯‘è½¬æ¢ä»£ç </p>
<p><code>yarn add babel-loader @babel/core @babel/preset-env </code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/.js$/</span>,</span><br><span class="line">                <span class="attr">use</span>: &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">          ]</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ¨¡å—åŠ è½½æ–¹å¼"><a class="markdownIt-Anchor" href="#æ¨¡å—åŠ è½½æ–¹å¼"></a> æ¨¡å—åŠ è½½æ–¹å¼</h4>
<blockquote>
<p>éå¿…è¦ï¼Œä¸è¦æ··ç”¨æ ‡å‡†</p>
</blockquote>
<p>éµå¾ªESMçš„importå£°æ˜</p>
<p>éµå¾ªCJSçš„requireå‡½æ•°ï¼Œï¼ˆCJS require ESMçš„é»˜è®¤å¯¼å‡ºæ¨¡å—ï¼Œéœ€è¦<code>require().default</code>ï¼‰</p>
<p>éµå¾ªAMDçš„defineå’Œrequireå‡½æ•°</p>
<p>LoaderåŠ è½½çš„éJSä¹Ÿä¼šè§¦å‘èµ„æºåŠ è½½ï¼ˆå¤„ç†çš„ç»“æœæ‰“åŒ…åˆ°è¾“å‡ºç›®å½•ï¼‰</p>
<p>â€‹	æ ·å¼ä»£ç çš„@importæŒ‡ä»¤ urlå‡½æ•°</p>
<p>â€‹		<code>@import url(reset.css);</code></p>
<p>â€‹		<code>background-image: url(background.jpeg);</code></p>
<p>â€‹	htmlä¸­çš„srcå±æ€§</p>
<blockquote>
<p>Footer.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;img src=&quot;footer.jpeg&quot;&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;footer.jpeg&quot;</span>&gt;</span>download<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>htmlæ–‡ä»¶é»˜è®¤å¯¼å‡ºæ˜¯å­—ç¬¦ä¸²ï¼Œéœ€è¦æ¥æ”¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> footerHtml <span class="keyword">from</span> <span class="string">&#x27;./footer.html&#x27;</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(footer.<span class="property">html</span>)</span><br></pre></td></tr></table></figure>
<p>å†é…åˆhtml-loaderï¼ˆ<mark>é»˜è®¤åªèƒ½åŠ è½½img src</mark>ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/.html$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="string">&#x27;html-loader&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="comment">// attrs: [&#x27;img:src&#x27;, &#x27;a:href&#x27;] //å·²ç»è¢«åºŸå¼ƒ</span></span><br><span class="line">            <span class="attr">sources</span>: &#123;</span><br><span class="line">                <span class="attr">list</span>: [</span><br><span class="line">                    <span class="string">&quot;...&quot;</span>,<span class="comment">// æ‰€æœ‰é»˜è®¤æ”¯æŒçš„æ ‡ç­¾å’Œå±æ€§ï¼Œè¿™ä¸ªä¸€å®šè¦åŠ ä¸Šï¼Œä¸ç„¶å°±åªä¼šæ£€æµ‹aæ ‡ç­¾äº†</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">tag</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">                        <span class="attr">attribute</span>: <span class="string">&#x27;href&#x27;</span>,</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&#x27;src&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<hr />
<h4 id="loaderæ ¸å¿ƒå·¥ä½œåŸç†"><a class="markdownIt-Anchor" href="#loaderæ ¸å¿ƒå·¥ä½œåŸç†"></a> Loaderæ ¸å¿ƒå·¥ä½œåŸç†</h4>
<p>å…¥å£æ–‡ä»¶ï¼ˆjsæ–‡ä»¶ ï¼‰</p>
<p>é€šè¿‡require import æ¨æ–­è§£ææ–‡ä»¶æ‰€ä¾èµ–çš„æ¨¡å—ï¼Œåˆ†åˆ«è§£ææ¯ä¸ªæ¨¡å—</p>
<p>ç”Ÿæˆä¾èµ–æ ‘ï¼Œé€’å½’ä¾èµ–æ ‘ï¼Œæ‰¾åˆ°ç»“ç‚¹çš„ä¾èµ–æ–‡ä»¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ruleså±æ€§ï¼Œæ‰¾åˆ°å¯¹åº”loaderï¼Œæœ€åæ‰“åŒ…åœ¨bundle.jsæ–‡ä»¶</p>
<p><em><strong>Loaderæœºåˆ¶æ˜¯webpackæ ¸å¿ƒ</strong></em></p>
<hr />
<blockquote>
<p>Loaderæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯¼å‡ºå‡½æ•°çš„Javascriptæ¨¡å—ï¼ŒWebpackè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå°†æ–‡ä»¶å†…å®¹ä¼ é€’ç»™å®ƒï¼Œè¿”å›è½¬æ¢åçš„ç»“æœã€‚è¿™ä¸ªå‡½æ•°éœ€è¦è¿”å›ä¸€ä¸ªJavascriptæ¨¡å—ï¼ŒWebpackä¼šå°†å®ƒæ‰“åŒ…åˆ°æœ€ç»ˆçš„è¾“å‡ºä¸­ã€‚</p>
</blockquote>
<p><em><strong>ç®¡é“ï¼ˆPipelineï¼‰æœºåˆ¶</strong></em></p>
<h4 id="å¼€å‘ä¸€ä¸ªloader"><a class="markdownIt-Anchor" href="#å¼€å‘ä¸€ä¸ªloader"></a> å¼€å‘ä¸€ä¸ªLoader</h4>
<p>loaderè´Ÿè´£èµ„æºæ–‡ä»¶ä»è¾“å…¥åˆ°è¾“å‡ºçš„è½¬æ¢</p>
<p>webpackä¸­å¯¹äºåŒä¸€ä¸ªèµ„æºå¯ä¸€æ¬¡ä½¿ç”¨å¤šä¸ªloaderï¼Œä½†æ˜¯æœ€åloaderå¤„ç†çš„resultå¿…é¡»æ˜¯ä¸€æ®µjsä»£ç </p>
<img src="https://s2.loli.net/2023/05/08/lvFeHpb1SPcY3rG.png" alt="image-20230504174619249" style="zoom: 25%;" />
<p>æ‰“åŒ…è¿‡åï¼Œwebpackç›´æ¥å°†loader returnçš„jsä»£ç æ‹¼æ¥åœ¨æ‰“åŒ…åçš„jsæ–‡ä»¶ä¸­</p>
<h5 id="ç®€å•å®ç°ä¸€ä¸ª-æ˜¾ç¤ºmarkdown-loader"><a class="markdownIt-Anchor" href="#ç®€å•å®ç°ä¸€ä¸ª-æ˜¾ç¤ºmarkdown-loader"></a> ç®€å•å®ç°ä¸€ä¸ª æ˜¾ç¤ºmarkdown loader</h5>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//aboutme.md</span><br><span class="line"><span class="section"># ä¸€ä¸ªmarkdownæ–‡ä»¶</span></span><br><span class="line"> xxxxx</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js æ‰“åŒ…å…¥å£æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¼å…¥mdæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> aboutMd <span class="keyword">from</span> <span class="string">&#x27;./aboutme.md&#x27;</span>  <span class="comment">//ä¸€èˆ¬mdæ–‡ä»¶å¯¼å…¥ä¼šæ˜¯ä¸€æ®µhtmlå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(aboutMd)</span><br></pre></td></tr></table></figure>
<p>loader returnè¾“å‡ºå¿…é¡»æ˜¯ä¸€æ®µjsä»£ç ï¼Œå…¶å®å°±æ˜¯å°†returnçš„ç»“æœç›´æ¥æ‹¼æ¥åœ¨æ‰“åŒ…å®Œæˆçš„jsæ–‡ä»¶ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//markdown-loader.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">source</span> =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> marked = <span class="built_in">require</span>(<span class="string">&#x27;marked&#x27;</span>) <span class="comment">//å€ŸåŠ©marked</span></span><br><span class="line">	<span class="keyword">const</span> html = marked.<span class="title function_">parse</span>(source)</span><br><span class="line">  </span><br><span class="line"> 	<span class="comment">//return `module.exports = $&#123;JSON.stringify(html)&#125;` //returnè¾“å‡ºå¿…é¡»æ˜¯ä¸€æ®µjsä»£ç </span></span><br><span class="line">  <span class="comment">// return `export default $&#123;JSON.stringify(html)&#125;` //esmå¯¼å‡º</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">//!!!!å€ŸåŠ©html-loader è§£æhtml</span></span><br><span class="line">  <span class="keyword">return</span> html</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/.md$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="comment">//useæ•°ç»„ï¼Œä»åå¾€å‰æ‰§è¡Œ</span></span><br><span class="line">                <span class="string">&#x27;html-loader&#x27;</span>,<span class="comment">//!!!!å€ŸåŠ©html-loader è§£æhtml</span></span><br><span class="line">                <span class="string">&#x27;./markdown-loader&#x27;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ’ä»¶pluginæœºåˆ¶"><a class="markdownIt-Anchor" href="#æ’ä»¶pluginæœºåˆ¶"></a> æ’ä»¶Pluginæœºåˆ¶</h4>
<p>å¢å¼ºwebpackè‡ªåŠ¨åŒ–èƒ½åŠ›</p>
<p>å¤„ç†<u>é™¤äº†loaderå¤„ç†çš„èµ„æºåŠ è½½</u>ä»¥å¤–è‡ªåŠ¨åŒ–å·¥ä½œ</p>
<p>e.g. æ¸…é™¤ä¸Šæ¬¡æ‰“åŒ…çš„distæ–‡ä»¶å¤¹</p>
<p>â€‹		å°†æ‹·è´çš„é™æ€æ–‡ä»¶è¾“å‡ºè‡³ç›®å½•</p>
<p>â€‹		å‹ç¼©è¾“å‡ºä»£ç </p>
<p>â€‹		â€¦</p>
<p>å®ç°å¤§å¤šæ•°å‰ç«¯å·¥ç¨‹åŒ–</p>
<h5 id="clean-webpack-plugin"><a class="markdownIt-Anchor" href="#clean-webpack-plugin"></a> <code>clean-webpack-plugin</code></h5>
<p>æ¸…é™¤è¾“å‡ºç›®å½•</p>
<p>æ–°æ‰“åŒ…åªä¼šè¦†ç›–é‡åæ–‡ä»¶ï¼Œè€Œå…¶ä»–æ–‡ä»¶åˆ™ä¼šä¸€ç›´ç§¯ç´¯åœ¨è¾“å‡ºç›®å½•</p>
<p><code>yarn add clean-webpack-plugin --dev</code> ç¬¬ä¸‰æ–¹åº“</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>:[</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="html-webpack-plugin"><a class="markdownIt-Anchor" href="#html-webpack-plugin"></a> <code>html-webpack-plugin</code></h5>
<p><strong>webpackè¾“å‡ºHTMLæ–‡ä»¶</strong></p>
<blockquote>
<p><code>html-webpack-plugin</code>æ˜¯ä¸€ä¸ªwebpackæ’ä»¶ï¼Œç”¨äºç”ŸæˆHTMLæ–‡ä»¶ã€‚å®ƒå¯ä»¥æ ¹æ®ä½ çš„é…ç½®è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œå¹¶å°†æ‰“åŒ…ç”Ÿæˆçš„jsã€cssç­‰æ–‡ä»¶<strong>è‡ªåŠ¨å¼•å…¥</strong>åˆ°HTMLæ–‡ä»¶ä¸­ã€‚</p>
</blockquote>
<p>è‡ªåŠ¨ä½¿ç”¨bundle.jsçš„html</p>
<p>æœ€ååªç”¨å‘å¸ƒdistç›®å½•ï¼Œä¸éœ€è¦å¦å¤–å†åŒæ—¶å‘å¸ƒä¸€ä¸ªhtmlæ–‡ä»¶</p>
<p><code>yarn add html-webpack-plugin --dev</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>:[</span><br><span class="line">    <span class="comment">//new HtmlWebpackPlugin() //åœ¨è¾“å‡ºç›®å½•ç”Ÿæˆindex.html</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;webpack plugin sample&#x27;</span>,</span><br><span class="line">      <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">viewport</span>: <span class="string">&#x27;width=device-width&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">template</span>:<span class="string">&#x27;./src/index.html&#x27;</span> <span class="comment">//æ¨¡æ¿æ–‡ä»¶</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ¨¡æ¿æ–‡ä»¶ ejsæ¨¡æ¿ --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%= htmlWebpackPlugin.options.title %&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&lt;%= htmlWebpackPlugin.options.title %&gt;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>è¾“å‡ºå¤šä¸ªhtmlé¡µé¢ï¼Œç›´æ¥å¤š<code>new HtmlWebpackPlugin(&#123;filename:'hello'&#125;)</code></strong></p>
<h5 id="copy-webpack-plugin-é™æ€èµ„æº"><a class="markdownIt-Anchor" href="#copy-webpack-plugin-é™æ€èµ„æº"></a> <code>copy-webpack-plugin</code> é™æ€èµ„æº</h5>
<p>å°†é™æ€æ–‡ä»¶æ‰“åŒ…copyåˆ°è¾“å‡ºç›®å½• ,<a href="#jump">ä¸€èˆ¬ä¸åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨</a></p>
<p><code>yarn add copy-webpack-plugin --dev</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CopyWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;copy-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>:[</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CopyWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">patterns</span>: [</span><br><span class="line">        &#123;<span class="attr">from</span>: <span class="string">&#x27;public&#x27;</span>, <span class="attr">to</span>: <span class="string">&#x27;&#x27;</span>&#125; <span class="comment">//ä»é‚£ä¸ªæ–‡ä»¶åˆ°è¾“å‡ºæ–‡ä»¶å¤¹</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="è‡ªå®šä¹‰æ’ä»¶"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰æ’ä»¶"></a> è‡ªå®šä¹‰æ’ä»¶</h5>
<p>Pluginé€šè¿‡é’©å­æœºåˆ¶å®ç°</p>
<p>ä¸€ä¸ªå…·æœ‰ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply"><code>apply</code></a> æ–¹æ³•çš„ JavaScript å¯¹è±¡</p>
<p>é€šè¿‡åœ¨ç”Ÿå‘½å‘¨æœŸçš„é’©å­æŒ‚è½½å‡½æ•°å®ç°æ‰©å±•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºå¤„ç†åˆ é™¤æ‰“åŒ…bundle.js çš„å‰é¢çš„æ³¨é‡Š</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPlugin</span>()&#123;</span><br><span class="line">  <span class="title function_">apply</span>(<span class="params">compliler</span>)&#123;</span><br><span class="line">    compiler.<span class="property">hooks</span>.<span class="property">emit</span>.<span class="title function_">tap</span>(<span class="string">&#x27;MyPlugin&#x27;</span>, <span class="function"><span class="params">conpilation</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// compilation æ­¤æ¬¡æ‰“åŒ…çš„ä¸Šä¸‹æ–‡</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">const</span> file <span class="keyword">in</span> compilation.<span class="property">assets</span>)&#123;</span><br><span class="line">        <span class="comment">//console.log(filename) //æ‰“åŒ…ç›®å½•çš„æŸä¸ªæ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span>(file.<span class="title function_">endsWith</span>(<span class="string">&#x27;.js&#x27;</span>))&#123;</span><br><span class="line">          <span class="keyword">const</span> content = compilation.<span class="property">assets</span>[file].<span class="title function_">source</span>() <span class="comment">//æŸä¸ªæ–‡ä»¶å†…å®¹</span></span><br><span class="line">          <span class="keyword">const</span> withoutComments = contents.<span class="title function_">replace</span>(<span class="regexp">/\/\*\*+\*\//g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">          compliation.<span class="property">assets</span>[file] = &#123; <span class="comment">//è¦†ç›–ä¸€ä¸‹é‡Œé¢çš„æ–¹æ³•</span></span><br><span class="line">            <span class="attr">source</span>: <span class="function">()=&gt;</span> withoutComments,</span><br><span class="line">         		<span class="attr">size</span>: <span class="function">()=&gt;</span> withoutComments.<span class="property">length</span></span><br><span class="line">         &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¢å¼ºå¼€å‘ä½“éªŒ"><a class="markdownIt-Anchor" href="#å¢å¼ºå¼€å‘ä½“éªŒ"></a> å¢å¼ºå¼€å‘ä½“éªŒ</h4>
<p>æ‰‹åŠ¨å¯åŠ¨æœåŠ¡ï¼Œè¿‡äºåŸå§‹</p>
<img src="https://s2.loli.net/2023/05/08/NvyFanxBXjJAkKE.png" alt="image-20230504205435077" style="zoom:35%;" />
<blockquote>
<p><strong>éœ€æ±‚</strong></p>
<p>http serverå¯åŠ¨ï¼ˆæ¥è¿‘ï¼‰</p>
<p>è‡ªåŠ¨ç¼–è¯‘+è‡ªåŠ¨åˆ·æ–°</p>
<p>source mapæ”¯æŒ</p>
</blockquote>
<h5 id="è‡ªåŠ¨ç¼–è¯‘åˆ·æ–°"><a class="markdownIt-Anchor" href="#è‡ªåŠ¨ç¼–è¯‘åˆ·æ–°"></a> è‡ªåŠ¨ç¼–è¯‘+åˆ·æ–°</h5>
<ul>
<li><u><code>watch</code>å·¥ä½œæ¨¡å¼</u> ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨é‡æ–°æ‰“åŒ…</li>
</ul>
<p>â€‹	ä¸“æ³¨ç¼–ç </p>
<p>â€‹	<code>yarn webpack --watch</code></p>
<ul>
<li>ç¼–è¯‘åè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨</li>
</ul>
<p>â€‹	<a target="_blank" rel="noopener" href="https://browsersync.bootcss.com/#install"><code>BrowserSync</code></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g browser-sync</span><br><span class="line">browser-sync start --server --files &quot;css/*.css&quot; //ä¸€ä¸ªåŸºæœ¬ç”¨é€”æ˜¯ï¼Œç›‘å¬æŸä¸ª css æ–‡ä»¶</span><br><span class="line">//&quot;**/*&quot; //ç›‘å¬æ‰€æœ‰æ–‡ä»¶çš„å˜åŒ–</span><br></pre></td></tr></table></figure>
<p><strong><code>browser-sync æ–‡ä»¶å¤¹å --files &quot;**/*&quot; </code></strong></p>
<blockquote>
<p><em><strong>watch ä¸ browser-syncç»“åˆéº»çƒ¦ï¼Œæ•ˆç‡ä½</strong></em></p>
</blockquote>
<h5 id="webpack-dev-server"><a class="markdownIt-Anchor" href="#webpack-dev-server"></a> <mark><code>webpack-dev-server</code></mark></h5>
<p><mark>å¯¹å¼€å‘è€…æä¾›ä¸€ä¸ªè‰¯å¥½çš„æœåŠ¡å™¨</mark></p>
<p>è‡ªåŠ¨ç¼–è¯‘+åˆ·æ–°</p>
<p><code>yarn add webpack-dev-server --dev</code></p>
<p><code>yarn webpack-dev-server</code> å¯åŠ¨</p>
<p>æ·»åŠ  <code>--open</code> è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨çª—å£</p>
<p><em>å°†æ‰“åŒ…ç»“æœå†™å…¥å†…å­˜ï¼Œå¹¶æ²¡æœ‰ç”Ÿæˆdistç›®å½•ï¼Œä¸éœ€è¦<strong>è¯»å†™ç£ç›˜</strong>ï¼Œæé«˜æ•ˆç‡</em></p>
<h5 id="webpack-dev-serveré™æ€èµ„æºè®¿é—®"><a class="markdownIt-Anchor" href="#webpack-dev-serveré™æ€èµ„æºè®¿é—®"></a> <code>webpack-dev-server</code>é™æ€èµ„æºè®¿é—®</h5>
<p>Dev-serveré»˜è®¤åªä¼šserveæ‰“åŒ…è¾“å‡ºæ–‡ä»¶</p>
<p>åªè¦æ˜¯é€šè¿‡webpackæ‰“åŒ…è¾“å‡ºçš„æ–‡ä»¶éƒ½èƒ½è¢«è®¿é—®åˆ°</p>
<p><span id='jump' style="visibility:none;"></span></p>
<blockquote>
<p>ä¹‹å‰é€šè¿‡clean-webpack-pluginæ’ä»¶å®ç°å°†é™æ€èµ„æºæ‰“åŒ…åˆ°è¾“å‡ºæ–‡ä»¶å¤¹ï¼Œ</p>
<p>ä½†æ˜¯åœ¨å¼€å‘ç¯å¢ƒä¸€èˆ¬ä¸è¦ä½¿ç”¨æ’ä»¶ï¼Œ</p>
<p>å› ä¸ºæˆ‘ä»¬é¢‘ç¹ä¿®æ”¹ä»£ç ï¼Œæ‹·è´é™æ€æ–‡ä»¶ï¼Œå°†å½±å“å¼€å‘</p>
<p>æ‰€ä»¥ä¸€èˆ¬æ˜¯åœ¨ä¸Šçº¿çš„é˜¶æ®µå‰ï¼Œä½¿ç”¨ä¸€æ¬¡è¿™ä¸ªæ’ä»¶</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.webpackjs.com/configuration/dev-server/#devserverstatic">webpack.devServer.static</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">//contentBase: &#x27;./public&#x27;, //wepack5å·²ç»ç§»é™¤</span></span><br><span class="line">    <span class="attr">static</span>: &#123;</span><br><span class="line">            <span class="attr">directory</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;public&#x27;</span>) <span class="comment">//æŒ‡å®šå½“å‰é¡¹ç›®é™æ€èµ„æºæ–‡ä»¶å¤¹</span></span><br><span class="line">        &#125;<span class="comment">//å¯ä»¥æ‰˜ç®¡å¤šä¸ªé™æ€æ–‡ä»¶å¤¹</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="webpack-dev-server-ä»£ç†apiæœåŠ¡"><a class="markdownIt-Anchor" href="#webpack-dev-server-ä»£ç†apiæœåŠ¡"></a> <code>webpack-dev-server </code>ä»£ç†APIæœåŠ¡</h5>
<blockquote>
<p>CORS è·¨åŸŸèµ„æºå…±äº«ï¼ŒæœåŠ¡ç«¯å¼€å¯</p>
<p>å¹¶ä¸æ˜¯ä»»ä½•æƒ…å†µæœåŠ¡ç«¯éƒ½å¿…é¡»æ”¯æŒCORSï¼Œ</p>
<p>å‰åç«¯åŒæºéƒ¨ç½²ï¼Œæ²¡å¿…è¦å¼€å¯CORS</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">ä»£ç†APIæœåŠ¡</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://s2.loli.net/2023/05/08/yVghdvRLlaZ39ES.png" alt="image-20230505135331738 " style="zoom:33%;" /></td>
</tr>
</tbody>
</table>
<p><strong>ä»£ç† <a target="_blank" rel="noopener" href="https://api.github.com">https://api.github.com</a></strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">static</span>: &#123;</span><br><span class="line">            <span class="attr">directory</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;public&#x27;</span>) <span class="comment">//æŒ‡å®šå½“å‰é¡¹ç›®é™æ€èµ„æºæ–‡ä»¶å¤¹</span></span><br><span class="line">        &#125;</span><br><span class="line">  	&#125;,</span><br><span class="line">  	<span class="comment">// !!!ä»£ç†</span></span><br><span class="line">  	<span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">                <span class="comment">// å¯¹å½“å‰`/api/users`çš„è¯·æ±‚ --ä¼šä»£ç†åˆ°--&gt; `https://api.github.com/api/users`</span></span><br><span class="line">                <span class="attr">target</span>: <span class="string">&#x27;https://api.github.com&#x27;</span>,</span><br><span class="line">                <span class="comment">// å¦‚æœä¸å¸Œæœ›ä¼ é€’/apiï¼Œåˆ™éœ€è¦é‡å†™è·¯å¾„ </span></span><br><span class="line">                <span class="attr">pathRewrite</span>: &#123; <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span> &#125;, <span class="comment">//`/api/users`çš„è¯·æ±‚ --ä¼šä»£ç†åˆ°--&gt; `https://api.github.com/users`</span></span><br><span class="line">                <span class="comment">// ä¸èƒ½ä½¿ç”¨localhost:8080 ä½œä¸ºè¯·æ±‚GitHubçš„ä¸»æœºå</span></span><br><span class="line">                <span class="comment">/* </span></span><br><span class="line"><span class="comment">                    æœåŠ¡å™¨æœ‰å¤šä¸ªç½‘ç«™ï¼ŒæœåŠ¡å™¨é€šè¿‡ä¸»æœºååˆ¤æ–­è¯¥è¯·æ±‚é‚£ä¸ªç½‘ç«™ </span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line">                <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main.js</span></span><br><span class="line"><span class="comment">// ä»£ç†è¯·æ±‚`https://api.github.com/users`</span></span><br><span class="line"><span class="comment">//http://localhost:8080/api/users åŒæºè¯·æ±‚ï¼Œä¸ç”¨æ‹…å¿ƒè·¨åŸŸé—®é¢˜</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;/api/users&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>res.<span class="title function_">json</span>()).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="sourcemap"><a class="markdownIt-Anchor" href="#sourcemap"></a> sourceMap</h5>
<p>è¿è¡Œä»£ç ä¸æºä»£ç ä¸åŒ</p>
<p>éœ€è¦è°ƒè¯•åº”ç”¨ï¼Œå®šä½é”™è¯¯</p>
<p><strong>è°ƒè¯•å’ŒæŠ¥é”™éƒ½æ˜¯åŸºäºè½¬æ¢åçš„ä»£ç è¿è¡Œçš„</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">sourceMapæ˜ å°„æºä»£ç ä¸è½¬æ¢åä»£ç çš„å…³ç³»</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://s2.loli.net/2023/05/08/MOTNu8KoedPZj7v.png" alt="image-20230505151251462" style="zoom:25%;" /></td>
</tr>
<tr>
<td style="text-align:center"><img src="https://s2.loli.net/2023/05/08/nb23756hNwTodgZ.png" alt="image-20230505151353861" style="zoom:24%;" /></td>
</tr>
</tbody>
</table>
<p><em>sourceMapè§£å†³äº†æºä»£ç å’Œè¿è¡Œä»£ç ä¸ä¸€è‡´æ‰€äº§ç”Ÿçš„é—®é¢˜</em></p>
<blockquote>
<p>æ‹¿jqueryè·ä¸¾ä¾‹</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥çš„æ˜¯å‹ç¼©åçš„jqåŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;jquery.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"> <span class="comment">// ä½¿ç”¨</span></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">var</span> $body = $(<span class="variable language_">document</span>.<span class="property">body</span>)</span></span><br><span class="line"><span class="language-javascript">	<span class="variable language_">console</span>.<span class="title function_">log</span>($body)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jquery.min.js</span></span><br><span class="line">xxxxxxxxxxxxxxxxxxxxxx</span><br><span class="line"></span><br><span class="line"><span class="comment">//# sourceMappingURL=jquery.min.map </span></span><br><span class="line"><span class="comment">//æµè§ˆå™¨ä¼šè‡ªåŠ¨è¯†åˆ«ï¼Œç”¨äºåœ¨æµè§ˆå™¨å¼€å‘å·¥å…·ä¸­è°ƒè¯•å’Œå®šä½ä»£ç æ—¶æä¾›æºæ–‡ä»¶çš„æ˜ å°„å…³ç³»</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jquery.js //jsæ²¡è¢«å‹ç¼©çš„æºæ–‡ä»¶</span></span><br><span class="line">xxxxxxxxxxx</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jquery.min.map //sourceMapæ–‡ä»¶</span></span><br><span class="line">xxxxxxxx</span><br></pre></td></tr></table></figure>
<p>ä¹‹ååœ¨æµè§ˆå™¨è°ƒè¯•ï¼Œè™½ç„¶æ–‡ä»¶å¼•å…¥ä½¿ç”¨çš„æ˜¯å‹ç¼©åçš„ä½“ç§¯ï¼Œä½†æ˜¯å› ä¸ºæœ‰sourcemapæ–‡ä»¶å°±èƒ½ç›´æ¥å®šä½åˆ°æºæ–‡ä»¶</p>
</blockquote>
<h5 id="webpacké…ç½®sourcemap"><a class="markdownIt-Anchor" href="#webpacké…ç½®sourcemap"></a> webpacké…ç½®sourceMap</h5>
<h6 id="source-mapæ¨¡å¼"><a class="markdownIt-Anchor" href="#source-mapæ¨¡å¼"></a> <code>source-map</code>æ¨¡å¼</h6>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>yarn webpack</code> åœ¨distç›®å½•ç”Ÿæˆsourcemapæ–‡ä»¶</p>
<p>webpackæ”¯æŒå¤šç§soucemapæ–¹å¼ï¼Œæ¯ç§æ–¹å¼çš„æ•ˆç‡å’Œæ•ˆæœéƒ½ä¸ç›¸åŒ</p>
<h6 id="evalæ¨¡å¼"><a class="markdownIt-Anchor" href="#evalæ¨¡å¼"></a> <code>eval</code>æ¨¡å¼</h6>
<ul>
<li>æ˜ å°„åˆ°è½¬æ¢åçš„ä»£ç </li>
<li>é€Ÿåº¦fastest</li>
</ul>
<p>å°†æ¨¡å—æ‰“åŒ…åçš„ä»£ç æ”¾å…¥evalå‡½æ•°æ‰§è¡Œï¼Œé…åˆ <code>#sourceURL=è·¯å¾„</code>æ–¹å¼è¯´æ˜å¯¹åº”æ–‡ä»¶è·¯å¾„ï¼Œæµè§ˆå™¨æ‰§è¡Œå°±åˆ°æºä»£ç æ˜¯å“ªä¸ªæ–‡ä»¶ï¼Œä»è€Œå®šä½æ–‡ä»¶</p>
<p>å¹¶æ²¡æœ‰ç”ŸæˆsourceMapæ–‡ä»¶</p>
<blockquote>
<p><font color=red>æ‰“åŒ…è¿‡åçš„æ¨¡å—ä»£ç </font></p>
<p>å®šä½æ–‡ä»¶ä¿¡æ¯ï¼Œè€Œä¸çŸ¥é“è¡Œåˆ—ï¼ˆï¼‰</p>
</blockquote>
<h6 id="æ¨¡å¼å¯¹æ¯”"><a class="markdownIt-Anchor" href="#æ¨¡å¼å¯¹æ¯”"></a> æ¨¡å¼å¯¹æ¯”</h6>
<p><code>eval</code> ä½¿ç”¨evalå‡½æ•°+sourceURLæ‰§è¡Œæ¨¡å—ï¼Œåªæœ‰è¡Œä¿¡æ¯</p>
<p><code>cheap</code> åªæœ‰è¡Œä¿¡æ¯ï¼Œæ²¡æœ‰å…·ä½“åˆ—ä¿¡æ¯</p>
<p>å¸¦æœ‰<code>module</code>ï¼Œæ²¡æœ‰ç»è¿‡loader esè½¬æ¢ï¼ˆä¾‹å¦‚babel-loaderï¼‰çš„ä¿¡æ¯</p>
<p><img src="https://s2.loli.net/2023/05/08/DC6gvoAi9TqN2mn.png" alt="image-20230505165912024" /></p>
<p><code>Inline</code> sourceMapä»¥dataURlæ¨¡å¼åµŒå…¥åˆ°è½¬æ¢åçš„æ¨¡å—ä¸­</p>
<p><code>hidden</code> ç”Ÿæˆäº†sourcemapæ–‡ä»¶ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ³¨é‡Šå¼•å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œï¼ˆç¬¬ä¸‰æ–¹åŒ…ï¼Œï¼‰</p>
<p><code>nosources</code> è°ƒè¯•å·¥å…·çœ‹ä¸åˆ°æºä»£ç ï¼Œä½†æ˜¯æä¾›äº†è¡Œåˆ—ä¿¡æ¯ã€‚ç”Ÿäº§ç¯å¢ƒä¿æŠ¤æºä»£ç ï¼Œä¸ä¼šè¢«æš´éœ²</p>
<h5 id="é€‰æ‹©sourcemap"><a class="markdownIt-Anchor" href="#é€‰æ‹©sourcemap"></a> é€‰æ‹©sourcemap</h5>
<p>å¼€å‘ç¯å¢ƒ <code>cheap-module-eval-source-map</code></p>
<img src="https://s2.loli.net/2023/05/08/jLxybh6wuodRqc8.png" alt="image-20230505170647622" style="zoom:25%;" />
<p>ç”Ÿäº§ç¯å¢ƒ <code>none</code></p>
<img src="https://s2.loli.net/2023/05/08/YoQROVGhfbacKMp.png" alt="image-20230505170741601" style="zoom: 25%;" />
<p><em><strong>è°ƒè¯•æ˜¯å¼€å‘é˜¶æ®µçš„é—®é¢˜</strong></em>ï¼Œæ²¡æœ‰ä¿¡æ¯é€‰æ‹©nosources-source-map</p>
<h4 id="hmr-hot-module-replacementæ¨¡å—çƒ­æ›´æ–°"><a class="markdownIt-Anchor" href="#hmr-hot-module-replacementæ¨¡å—çƒ­æ›´æ–°"></a> HMR (hot module replacement)æ¨¡å—çƒ­æ›´æ–°</h4>
<blockquote>
<p>è‡ªåŠ¨åˆ·æ–°é¡µé¢ä»»ä½•æ“ä½œçŠ¶æ€éƒ½ä¼šä¸¢å¤±</p>
<ol>
<li>æå‰å†™æ­»ç¼–è¾‘å™¨å†…å®¹</li>
<li>é¢å¤–ä»£ç å®ç°åˆ·æ–°å‰ä¿å­˜ï¼Œåˆ·æ–°åè¯»å–</li>
</ol>
<p><strong>æœ€å¥½ï¼šé¡µé¢ä¸åˆ·æ–°ï¼Œæ¨¡å—å¯ä»¥æ›´æ–°ä»£ç æ¨¡å—</strong></p>
</blockquote>
<p>åº”ç”¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå®æ—¶æ›¿æ¢æŸä¸ªæ¨¡å—ï¼Œåº”ç”¨è¿è¡ŒçŠ¶æ€ä¸æ”¹å˜</p>
<p>æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œæå¤§æé«˜äº†å·¥ä½œæ•ˆç‡</p>
<p>é›†æˆåœ¨webpack-dev-server</p>
<h5 id="å¼€å¯hmr-hot"><a class="markdownIt-Anchor" href="#å¼€å¯hmr-hot"></a> å¼€å¯hmr <code>hot</code></h5>
<p><code>yarn webpack-dev-server --hot</code></p>
<p>æˆ–è€…</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">HotModuleReplacementPlugin</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><font color=red>webpackçš„HMRå¹¶ä¸èƒ½å¼€ç®±å³ç”¨</font></p>
<p>æ ·å¼æ–‡ä»¶å¯ä»¥çš„åŸå› æ˜¯ï¼Œç»è¿‡loaderå¤„ç†ï¼Œstyle-loaderå¤„ç†äº†æ ·å¼æ–‡ä»¶çƒ­æ›´æ–°</p>
<p>ä½¿ç”¨æ¡†æ¶å¼€å‘vue reactï¼Œæ¯ç§æ–‡ä»¶æœ‰è§„å¾‹ï¼Œæœ‰é€šç”¨çš„æ›¿æ¢åŠæ³•ï¼Œè„šæ‰‹æ¶åˆ›å»ºçš„é¡¹ç›®éƒ½ç»§æ‰¿äº†HMRæ–¹æ¡ˆ</p>
<p><font color=red>ä½†æ˜¯webpackçš„HMRéœ€è¦æ‰‹åŠ¨å¤„ç†æ¨¡å—çƒ­æ›¿æ¢é€»è¾‘Â </font></p>
</blockquote>
<p><em>æ›´æ–°è¢«æˆ‘ä»¬<strong>æ‰‹åŠ¨å¤„ç†</strong>äº†ï¼Œå°±<strong>ä¸ä¼šè§¦å‘è‡ªåŠ¨åˆ·æ–°</strong>ï¼Œåä¹‹å°±ä¼šåˆ·æ–°é¡µé¢</em></p>
<h5 id="jsæ¨¡å—hmr"><a class="markdownIt-Anchor" href="#jsæ¨¡å—hmr"></a> jsæ¨¡å—hmr</h5>
<p>ä¸åŒçš„jsæ¨¡å—æœ‰ä¸åŒçš„é€»è¾‘ï¼Œæ‰€ä»¥éœ€è¦è‡ªå®šä¹‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js æ‰“åŒ…å…¥å£jsæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">CreateEditor</span> <span class="keyword">from</span> <span class="string">&#x27;./editor.js&#x27;</span> <span class="comment">//ä¸ºä¸€ä¸ªåˆ›å»ºç¼–è¾‘å™¨çš„æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> editor = <span class="title function_">createEditor</span>()</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(editor)</span><br><span class="line"></span><br><span class="line"><span class="comment">//##########å¤„ç†hmrï¼Œä¸ä¸Šé¢ä¸šåŠ¡ä»£ç æ— å…³ï¼Œå¹¶ä¸”ä¸‹é¢ä»£ç å¹¶ä¸ä¼šè¢«æ‰“åŒ…############</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable language_">module</span>.<span class="property">hot</span>)&#123; <span class="comment">//module.hot ç”±æ’ä»¶webpack.HotModuleReplacementPlugin()å¸¦æ¥ï¼ŒåŸç”Ÿmoduleå¹¶ä¸å­˜åœ¨</span></span><br><span class="line"> 		 <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * //æ³¨å†ŒæŸä¸ªæ¨¡å—æ›´æ–°è¿‡åçš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; &#x27;./editor.js&#x27; - ç›‘è§†æ¨¡å—ä¾èµ–è·¯å¾„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">callback</span>&#125;  - å¤„ç†æ›´æ–°çš„é€»è¾‘å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">  <span class="keyword">let</span> lastEditor = editor</span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&#x27;./editor.js&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> value = lastEditor.<span class="property">innerHTML</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> newEditor = <span class="title function_">createEditor</span>()</span><br><span class="line">    newEditor.<span class="property">innerHTML</span> = value</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(newEditor)</span><br><span class="line">    </span><br><span class="line">    lastEditor = newEditor</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å›¾ç‰‡hmr"><a class="markdownIt-Anchor" href="#å›¾ç‰‡hmr"></a> å›¾ç‰‡hmr</h5>
<p>ç›´æ¥åœ¨<code>module.hot.accept</code>æ›´æ–°å›¾ç‰‡è·¯å¾„å°±è¡Œ</p>
<h5 id="hotonly"><a class="markdownIt-Anchor" href="#hotonly"></a> <code>hotonly</code></h5>
<p>å‡å¦‚è¯´hmrå¤„ç†é€»è¾‘æœ‰è¯¯ï¼Œå°±ä¼šå¯¼è‡´é¡µé¢è‡ªåŠ¨åˆ·æ–°ï¼Œçœ‹ä¸åˆ°æŠ¥é”™ä¿¡æ¯</p>
<p>é‚£å°±æœ€å¥½ä½¿ç”¨<code>hotonly</code>ï¼Œç»´æŒåŸçŠ¶ï¼Œä¸ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢</p>
<p><code>yarn webpack-dev-server --hot only</code></p>
<p>æˆ–è€…</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">//hotOnly: true, webpack5åºŸå¼ƒ</span></span><br><span class="line">    <span class="attr">hot</span>: <span class="string">&#x27;only&#x27;</span></span><br><span class="line">  &#125;ï¼Œ</span><br><span class="line">  <span class="attr">plugins</span>:[</span><br><span class="line">  	<span class="keyword">new</span> webpack.<span class="title function_">hmrp</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>module.hot</code> æ˜¯<code>webpack.HotModuleReplacementPlugin()</code> æ’ä»¶å¸¦æ¥çš„ï¼Œ</p>
<p><font color=red>å¤„ç†çƒ­æ›´æ–°çš„é€»è¾‘ä¹Ÿä¸ä¼šè¢«æ‰“åŒ…</font></p>
<h4 id="ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–"><a class="markdownIt-Anchor" href="#ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–"></a> ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–</h4>
<p>ç”Ÿäº§ç¯å¢ƒè·Ÿå¼€å‘ç¯å¢ƒå·®å¼‚å¤§ï¼Œ<u>ç”Ÿäº§ç¯å¢ƒæ³¨é‡è¿è¡Œæ•ˆç‡ï¼Œ</u>å¼€å‘ç¯å¢ƒæ³¨é‡å¼€å‘æ•ˆç‡</p>
<p>ä¸åŒçš„<code>mode</code> é…ç½®ï¼šnone, production, development</p>
<p>ä¸ºä¸åŒçš„ç¯å¢ƒåˆ›å»ºä¸åŒçš„é…ç½®</p>
<h4 id="ä¸åŒçš„ç¯å¢ƒçš„é…ç½®"><a class="markdownIt-Anchor" href="#ä¸åŒçš„ç¯å¢ƒçš„é…ç½®"></a> ä¸åŒçš„ç¯å¢ƒçš„é…ç½®</h4>
<ol>
<li>é…ç½®æ–‡ä»¶æ ¹æ®ç¯å¢ƒä¸åŒå¯¼å‡ºä¸åŒé…ç½®</li>
<li>ä¸€ä¸ªç¯å¢ƒå¯¹åº”ä¸€ä¸ªé…ç½®æ–‡ä»¶</li>
</ol>
<h5 id="ç¯å¢ƒå˜é‡å‚æ•°é…ç½®"><a class="markdownIt-Anchor" href="#ç¯å¢ƒå˜é‡å‚æ•°é…ç½®"></a> ç¯å¢ƒå˜é‡å‚æ•°é…ç½®</h5>
<p><code>webpack-config.js</code> å¯¼å‡ºæ¨¡å—<code>module.exports</code>å¯ä»¥å¯¼å‡ºä¸€ä¸ªå‡½æ•°</p>
<blockquote>
<p>å‚æ•° env ä»£è¡¨cliä¼ é€’çš„ç¯å¢ƒå˜é‡</p>
<p>å‚æ•° argv ä»£è¡¨cliä¼ é€’çš„æ‰€æœ‰å‚æ•°</p>
<p>â€‹	æ¯”å¦‚ï¼š<code>yarn webpack-dev-server --env production</code> æ­¤æ—¶env.prodution === true</p>
<p>è¿”å› ä¸€ä¸ªé…ç½®</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">env, argv</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="attr">devtool</span>: <span class="string">&#x27;cheap-module-eval-source-map&#x27;</span></span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...ç­‰å…¶ä»–å¼€å‘é˜¶æ®µçš„é…ç½®</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ­¤æ—¶ç¯å¢ƒä¸ºç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line">  <span class="keyword">if</span>(env.<span class="property">production</span>) &#123;</span><br><span class="line">    config.<span class="property">mode</span> = <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">    config.<span class="property">devtool</span> = <span class="string">&#x27;nosources-source-map&#x27;</span>,</span><br><span class="line">    config.<span class="property">plugins</span> = [</span><br><span class="line">      ...config.<span class="property">plugins</span>,</span><br><span class="line">    	<span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CopyWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">patterns</span>: [</span><br><span class="line">									&#123; <span class="attr">from</span>: <span class="string">&quot;public&quot;</span>, <span class="attr">to</span>: <span class="string">&quot;&quot;</span> &#125;</span><br><span class="line">              ],</span><br><span class="line">    &#125;)</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">return</span> config</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ä¸åŒç¯å¢ƒå¯¹åº”ä¸åŒé…ç½®"><a class="markdownIt-Anchor" href="#ä¸åŒç¯å¢ƒå¯¹åº”ä¸åŒé…ç½®"></a> ä¸åŒç¯å¢ƒå¯¹åº”ä¸åŒé…ç½®</h5>
<p>ä¸‰ä¸ªé…ç½®ï¼ˆå¼€å‘ã€ç”Ÿäº§ã€å…¬å…±ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.common.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;<span class="comment">//xxx</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>yarn add webpack-merge --dev</code>  ä¸“é—¨ç”¨äºåˆå¹¶å¯¼å‡ºé…ç½®é¡¹çš„å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.prod.js ç”Ÿäº§ç¯å¢ƒçš„webapcké…ç½®</span></span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.common.js&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; merge &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>) <span class="comment">// åˆå¹¶é…ç½®é¡¹å‡½æ•°</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(common, &#123;</span><br><span class="line">  <span class="attr">mode</span>:<span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">  <span class="comment">// xxxx</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.dev.js å¼€å‘ç¯å¢ƒçš„webpacké…ç½® ï¼ˆä¸prodå·®ä¸å¤šï¼‰</span></span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä¸åŒå¼€å‘ç¯å¢ƒçš„webpacké…ç½®ï¼ŒåŠ ä¸Š<code>--config</code>å‚æ•°</p>
<p><code>yarn webpack --config webpack.prod.js</code> æ‰§è¡Œ<strong>å¼€å‘ç¯å¢ƒ</strong>çš„webpacké…ç½®</p>
<p>æˆ–</p>
<p>åœ¨<code>package.json</code>ï¼Œå†™å…¥npm è„šæœ¬</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;script&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;webpack --config webpack.dev.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;webpack --config webpack.prod.js&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="webpackè‡ªå¸¦çš„ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#webpackè‡ªå¸¦çš„ä¼˜åŒ–"></a> webpackè‡ªå¸¦çš„ä¼˜åŒ–</h4>
<h5 id="defineplugin"><a class="markdownIt-Anchor" href="#defineplugin"></a> DefinePlugin</h5>
<p>ä¸ºä»£ç æ³¨å…¥å…¨å±€æˆå‘˜</p>
<p>é»˜è®¤å¯ç”¨ï¼Œ<font color=gray>ä»£ç æ³¨å…¥ä¸€ä¸ª<code>process.env.NODE_ENV</code>å¸¸é‡ï¼Œåˆ¤æ–­å½“å‰è¿è¡Œç¯å¢ƒ</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>:[</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">      <span class="comment">/*æ³¨å…¥ä¸€ä¸ªAPI_BASE_URLå¸¸é‡*/</span></span><br><span class="line">      <span class="comment">// API_BASE_URL: &#x27;&quot;http://example.com&quot;&#x27; //jsä»£ç ç‰‡æ®µ</span></span><br><span class="line">      <span class="attr">API_BASE_URL</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="string">&#x27;http://example.com&#x27;</span>) <span class="comment">//æˆ–è€…ç”¨è¿™ä¸ªæ–¹å¼</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">API_BASE_URL</span>) <span class="comment">//ç›´æ¥è°ƒç”¨</span></span><br></pre></td></tr></table></figure>
<h5 id="tree-shaking"><a class="markdownIt-Anchor" href="#tree-shaking"></a> Tree Shaking</h5>
<p>shakeæ‰ä»£ç ä¸­æœªå¼•ç”¨çš„éƒ¨åˆ†ï¼Œã€ æœªå¼•ç”¨ä»£ç dead-code ã€</p>
<p><strong>ç”Ÿäº§æ¨¡å¼</strong>è‡ªåŠ¨å¼€å¯ <code>yarn webpack--mode production</code></p>
<blockquote>
<p>treeshaking å¹¶ä¸æ˜¯webpackæŸä¸€ä¸ªé…ç½®é€‰é¡¹</p>
<p>æ˜¯ä¸€ç»„åŠŸèƒ½æ­é…ä½¿ç”¨çš„æ•ˆæœ</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack-cofig.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">usedExports</span>: <span class="literal">true</span>, <span class="comment">//åªå¯¼å‡ºä½¿ç”¨äº†çš„æ¨¡å—</span></span><br><span class="line">    <span class="attr">minimize</span>: <span class="literal">true</span> <span class="comment">//å‹ç¼©ä»£ç </span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="åˆå¹¶æ¨¡å—å‡½æ•°"><a class="markdownIt-Anchor" href="#åˆå¹¶æ¨¡å—å‡½æ•°"></a> åˆå¹¶æ¨¡å—å‡½æ•°</h5>
<p>ä¹Ÿæ˜¯<code>optimization</code>çš„ä¸€ä¸ªå±æ€§</p>
<p><strong><code>concatenateModules</code></strong>ï¼Œå°†æ‰€æœ‰çš„æ¨¡å—åˆå¹¶è¾“å‡ºåˆ°ä¸€ä¸ª<font color=red>å‡½æ•°</font>ä¸­ï¼ˆ<u><em>scope hoisting ä½œç”¨åŸŸæå‡</em></u>ï¼‰</p>
<blockquote>
<p>é»˜è®¤åœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨ï¼Œå…¶ä»–ç¯å¢ƒç¦ç”¨</p>
</blockquote>
<p>treeshaking å‰ææ˜¯ä½¿ç”¨ESMç»„ç»‡ä»£ç ï¼Œç”±webpackæ‰“åŒ…çš„ä»£ç ä½¿ç”¨ESM</p>
<p>ä¸ºäº†è½¬æ¢ä»£ç æ–°ç‰¹æ€§ï¼Œä½¿ç”¨babel-loaderï¼Œ<u><strong>æœ‰å¯èƒ½</strong>ä¼šå°†ESM-&gt;CJSï¼ˆå–å†³äºæ˜¯å¦ä½¿ç”¨äº†esmè½¬æ¢æ’ä»¶ï¼‰</u></p>
<p>@babel/preset-env æ’ä»¶é›†åˆå¸¦æœ‰äº†esmè½¬æ¢æ’ä»¶</p>
<p><strong>ä½†æ˜¯</strong>åœ¨æœ€æ–°çš„babel-loaderä¸­ï¼Œä½¿ç”¨preset-envæ’ä»¶ä¼šè‡ªåŠ¨<code>auto</code>è¯†åˆ«å½“å‰ç¯å¢ƒçš„æ¨¡å—åŒ–æ–¹å¼ï¼Œä¸ä¼šå¼ºåˆ¶è½¬æ¢esm</p>
<p>æƒ³è¦å¼ºåˆ¶è½¬æ¢ä¸ºcommojs</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/.js$/</span>,</span><br><span class="line">                <span class="attr">use</span>: &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">presets</span>: [</span><br><span class="line">                            [<span class="string">&#x27;@babel/preset-env&#x27;</span>, &#123; <span class="attr">modules</span>: <span class="string">&#x27;commonjs&#x27;</span> &#125;]</span><br><span class="line">                     				<span class="comment">//[&#x27;@babel/preset-env&#x27;, &#123; modules: false&#125;] //ä¸ä¼šè½¬æ¢æ¨¡å—</span></span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="sideeffects-å‰¯ä½œç”¨"><a class="markdownIt-Anchor" href="#sideeffects-å‰¯ä½œç”¨"></a> sideEffects å‰¯ä½œç”¨</h5>
<p>é€šè¿‡é…ç½®è¡¨ç¤ºä»£ç æ˜¯å¦æœ‰å‰¯ä½œç”¨ï¼Œæ›´å¥½çš„å¸®åŠ©treeshaking</p>
<p>æ¨¡å—æ‰§è¡Œçš„æ—¶å€™ï¼Œé™¤äº†å¯¼å‡ºæˆå‘˜ï¼Œåšå‡ºå…¶ä»–çš„äº‹æƒ…</p>
<blockquote>
<p>ä¸€èˆ¬ç”¨äºNPMæ¨¡å—åŒ…æ ‡è®°æ˜¯å¦æœ‰å‰¯ä½œç”¨</p>
<p>è¿™ä¸ªåŒ…æ˜¯å¦ä¼šå¯¹åŒ…ä»¥å¤–çš„å¯¹è±¡äº§ç”Ÿå½±å“ï¼Œæ¯”å¦‚æ˜¯å¦ä¿®æ”¹äº† window ä¸Šçš„å±æ€§ï¼Œæ˜¯å¦å¤å†™äº†åŸç”Ÿå¯¹è±¡ Array, Object æ–¹æ³•ã€‚</p>
</blockquote>
<p><strong>ä½¿ç”¨å‰æï¼šç¡®ä¿ä»£ç æ²¡æœ‰å‰¯ä½œç”¨</strong></p>
<p>å¼€å¯sideEffects</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//package.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;sideEffects&quot;</span> : <span class="literal">false</span> <span class="comment">//æ ‡è®°è¡¨ç¤ºè¿™ä¸ªåŒ…æ²¡æœ‰å‰¯ä½œç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;sideEffects&quot;</span> : [</span><br><span class="line">    <span class="string">&quot;./src/components/extends.js&quot;</span>, <span class="comment">//æ ‡è®°å“ªä¸ªæ–‡ä»¶æœ‰å‰¯ä½œç”¨</span></span><br><span class="line">    <span class="string">&quot;*.css&quot;</span>  <span class="comment">//cssæ¨¡å—ä¹Ÿæœ‰å‰¯ä½œç”¨</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">sideEffects</span>: <span class="literal">true</span>  <span class="comment">//å¼€å¯sideEffectsä¼˜åŒ–åŠŸèƒ½</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="åˆ†åŒ…ä»£ç åˆ†å‰²coding-splitting"><a class="markdownIt-Anchor" href="#åˆ†åŒ…ä»£ç åˆ†å‰²coding-splitting"></a> åˆ†åŒ…/ä»£ç åˆ†å‰²Coding Splitting</h5>
<p>æ‰“åŒ…åˆ°åŒä¸€ä¸ªbundleæ–‡ä»¶å¤ªå¤§äº†ï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªæ¨¡å—éƒ½æ˜¯åœ¨å¯åŠ¨æ—¶å¿…è¦çš„</p>
<p>åˆ†åŒ…ï¼ŒæŒ‰éœ€åŠ è½½</p>
<blockquote>
<p>HTTP1.1 å¹¶ä¸èƒ½å¯¹åŒä¸€ä¸ªåŸŸåä¸‹å‘èµ·å¾ˆå¤šå¹¶è¡Œè¯·æ±‚</p>
<p>æ¯æ¬¡è¯·æ±‚æœ‰å»¶è¿Ÿ</p>
<p>è¯·æ±‚Headeræµªè´¹å¸¦å®½æµé‡</p>
</blockquote>
<ul>
<li>
<p><mark>å¤šæ‰“åŒ…å…¥å£ multi entry</mark></p>
<ul>
<li>å¤šé¡µåº”ç”¨ç¨‹åº
<ul>
<li>ä¸€ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªæ‰“åŒ…å…¥å£ï¼Œå…¬å…±éƒ¨åˆ†å•ç‹¬æå–</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: &#123; <span class="comment">//ä¸¤ä¸ªæ‰“åŒ…å…¥å£ï¼Œå¯¹è±¡å½¢å¼</span></span><br><span class="line">    <span class="attr">home</span>: <span class="string">&#x27;./src/homepage/home.js&#x27;</span>,</span><br><span class="line">    <span class="attr">info</span>: <span class="string">&#x27;./src/info/info.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">output</span>:&#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;[name].bundle.js&#x27;</span>  <span class="comment">//[name]å ä½ç¬¦ï¼ŒåŒ¹é…entryçš„é”®ï¼Œè¿›è€Œæœ‰å‡ ä¸ªentryå°±æœ‰å‡ ä¸ªoutput</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&#x27;all&#x27;</span> <span class="comment">//å°†æ‰€æœ‰æ¨¡å—çš„å…¬å…±éƒ¨åˆ†å†æå–å‡ºæ¥</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;homepage&#x27;</span>,</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;home.html&#x27;</span>,</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;./src/homepage/home.html&#x27;</span>,</span><br><span class="line">      <span class="attr">chunks</span>: [<span class="string">&#x27;home&#x27;</span>] <span class="comment">//æŒ‡å®šå“ªä¸ªæ‰“åŒ…çš„æ¨¡å—æ‰èƒ½æ’å…¥åˆ°è¿™ä¸ªhtmlé¡µé¢ä¸­</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;info&#x27;</span>,</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;info.html&#x27;</span>,</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;./src/info/info.html&#x27;</span>,</span><br><span class="line">      <span class="attr">chunks</span>: [<span class="string">&#x27;info&#x27;</span>] <span class="comment">//æŒ‡å®šå“ªä¸ªæ‰“åŒ…çš„æ¨¡å—æ‰èƒ½æ’å…¥åˆ°è¿™ä¸ªhtmlé¡µé¢ä¸­</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><font color=gray>HtmlWebpackPluginé»˜è®¤å°†æ‰€æœ‰çš„æ‰“åŒ…æ–‡ä»¶éƒ½æ’å…¥åˆ°htmlä½¿ç”¨ï¼Œè¦ä½¿ç”¨chunksé…ç½®é¡¹åˆ¶å®šå•ç‹¬çš„jsæ‰“åŒ…æ¨¡å—</font></p>
</li>
<li>
<h6 id="åŠ¨æ€å¯¼å…¥-dynamic-import"><a class="markdownIt-Anchor" href="#åŠ¨æ€å¯¼å…¥-dynamic-import"></a> <mark>åŠ¨æ€å¯¼å…¥ Dynamic Import</mark></h6>
<ul>
<li>
<p>æ‰€æœ‰åŠ¨æ€å¯¼å…¥çš„æ¨¡å—ä¼š<strong style="color:red;">è‡ªåŠ¨åˆ†åŒ…</strong></p>
<ul>
<li>
<pre class="highlight"><code class="js"><span class="keyword">import</span>(<span class="string">&#x27;./xx.js&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">module</span>=&gt;</span>&#123;
  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>)
&#125;)
<span class="keyword">import</span>(<span class="string">&#x27;./yy.js&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">module</span>=&gt;</span>&#123;
  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>)
&#125;)

<span class="comment">//è‡ªåŠ¨åˆ†æˆä¸¤ä¸ªåŒ…</span>
&lt;!--codeï¿¼<span class="number">48</span>--&gt;

&lt;!--codeï¿¼<span class="number">49</span>--&gt;





</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="æå–cssæ–‡ä»¶"><a class="markdownIt-Anchor" href="#æå–cssæ–‡ä»¶"></a> æå–cssæ–‡ä»¶</h5>
<p>ä¹‹å‰éƒ½æ˜¯ç›´æ¥å°†cssæ–‡ä»¶æ‰“åŒ…åœ¨åŒä¸€ä¸ªbundleä¸­ï¼Œ</p>
<p>é€šè¿‡æ’ä»¶<code>MiniCssExtractPlugin</code> ,æå–cssæ–‡ä»¶ï¼Œå®ç°æŒ‰éœ€åŠ è½½</p>
<blockquote>
<p>ä¹‹å‰æ˜¯é€šè¿‡<code>css-loader</code>è§£ææ¨¡å—åŒ–cssæ–‡ä»¶ï¼Œå†ä½¿ç”¨<code>style-loader</code>é€šè¿‡styleæ ‡ç­¾æ³¨å…¥åˆ°é¡µé¢ä¸­</p>
<p>ç°åœ¨é€šè¿‡<code>MiniCssExtactPlugin.loader</code>é…åˆ<code>css-loader</code>å°†cssæ–‡ä»¶**<font color=red><code>link</code></font>**å¼•å…¥</p>
</blockquote>
<p><code>yarn add mini-css-webpack-plugin --dev</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¶…è¿‡150KBçš„cssæ–‡ä»¶å°±æœ€å¥½ä¸è¦æå–å‡ºæ¥ï¼Œ</p>
<p>é¿å…è¿‡å¤šçš„è¯·æ±‚</p>
</blockquote>
<h5 id="å‹ç¼©cssæ–‡ä»¶"><a class="markdownIt-Anchor" href="#å‹ç¼©cssæ–‡ä»¶"></a> å‹ç¼©cssæ–‡ä»¶</h5>
<blockquote>
<p>åœ¨å¼€å¯ç”Ÿäº§ç¯å¢ƒæ¨¡å¼æ—¶ï¼Œwebpackä¼šè‡ªåŠ¨å¼€å¯ä»£ç å‹ç¼©ï¼Œ</p>
<p>è€Œwebpackæœ¬èº«åªèƒ½å‹ç¼©jsæ–‡ä»¶</p>
</blockquote>
<p>ä½¿ç”¨**<code>OptimizeCssAssetsWebpackPlugin</code>**å‹ç¼©cssæ–‡ä»¶</p>
<p><code>yarn add optimize-css-assets-webpack-plugin --dev</code></p>
<blockquote>
<p>å¦‚æœå°†è¿™ä¸ªæ’ä»¶é…ç½®åœ¨pluginså±æ€§ä¸­ï¼Œé‚£ä¹ˆåœ¨ä»»ä½•æƒ…å†µéƒ½ä¼šå·¥ä½œ</p>
<p>é…ç½®åœ¨<code>minimizer</code>é…ç½®ï¼Œé‚£ä¹ˆåªåœ¨å‹ç¼©çš„è¿‡ç¨‹ä¸­æ‰å¯ç”¨è¿™ä¸ªæ’ä»¶ï¼Œ</p>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œè¿™æ—¶å€™éœ€è¦é…ç½®é¢å¤–çš„<code>terser-webpack-plugin</code> å‹ç¼©æ‰“åŒ…jsä»£ç </p>
</blockquote>
<p><em>webpackå¸Œæœ›æˆ‘ä»¬å°†å‹ç¼©ç›¸å…³æ’ä»¶å†™åœ¨optimization.minimizerå±æ€§ä¸­</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>) <span class="comment">//æå–cssä»£ç </span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">OptimizeCssAssetsWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;optimize-css-assets-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;terser-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">optimiztion</span>: &#123;</span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">OptimizeCssWebpackPlugin</span>(),<span class="comment">//å‹ç¼©cssä»£ç </span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserWebpackPlugin</span>() <span class="comment">//å‹ç¼©jsä»£ç </span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>()<span class="comment">//æå–cssæ–‡ä»¶</span></span><br><span class="line">  ]</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è¾“å‡ºæ–‡ä»¶åhash"><a class="markdownIt-Anchor" href="#è¾“å‡ºæ–‡ä»¶åhash"></a> è¾“å‡ºæ–‡ä»¶åHash</h4>
<p>Substitutions</p>
<blockquote>
<p>åœ¨éƒ¨ç½²å‰ç«¯èµ„æºæ–‡ä»¶æ˜¯ï¼Œå¯ç”¨æœåŠ¡å™¨çš„é™æ€èµ„æºç¼“å­˜</p>
<p>å¯¹äºç”¨æˆ·çš„æµè§ˆå™¨è€Œè¨€ï¼Œå¯ä»¥ç¼“å­˜ä½åº”ç”¨å½“ä¸­çš„é™æ€æ–‡ä»¶</p>
<p>åç»­å°±ä¸è¶³è¦è¯·æ±‚æœåŠ¡å™¨è·å–èµ„æº</p>
</blockquote>
<blockquote>
<p>å‡å¦‚è¯´å°†æ–‡ä»¶è¿‡æœŸæ—¶é—´è®¾ç½®è¾ƒé•¿ï¼Œåœ¨è¿‡ç¨‹ä¸­åº”ç”¨å‘ç”Ÿäº†æ›´æ–°ï¼Œé‡æ–°éƒ¨ç½²åï¼Œæ²¡æœ‰åŠæ—¶æ›´æ–°å®¢æˆ·ç«¯</p>
</blockquote>
<p>ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œæ–‡ä»¶åç”¨æ·»åŠ Hashå€¼</p>
<p>èµ„æºæ–‡ä»¶å‘ç”Ÿæ”¹å˜ï¼Œæ–‡ä»¶åä¹Ÿè·Ÿç€æ”¹å˜ï¼Œ</p>
<p>å¯¹äºå®¢æˆ·ç«¯ï¼Œå…¨æ–°çš„æ–‡ä»¶åå°±æ˜¯å…¨æ–°çš„è¯·æ±‚ï¼Œæ²¡æœ‰ç¼“å­˜çš„é—®é¢˜</p>
<p><code>filename: '[name].[hash].bundle.css'</code></p>
<p>ä¸‰ç§æ¨¡å¼ï¼š</p>
<p>hash é¡¹ç›®çº§åˆ«ï¼Œæ‰€æœ‰çš„æ‰“åŒ…æ–‡ä»¶å…±ç”¨ä¸€ä¸ªhashã€‚ä¸€ä¸ªæ–‡ä»¶ä¿®æ”¹ï¼Œæ‰€æœ‰æ–‡ä»¶çš„hashéƒ½å˜</p>
<p>trunkhash ä¸€ä¸ªentryå¯¹åº”ä¸€ä¸ªhash</p>
<p>contenthash å•æ–‡ä»¶çº§åˆ«çš„hash</p>
<blockquote>
<p>æ‰€ä¾èµ–çš„æ–‡ä»¶æ”¹å˜ï¼Œæ–‡ä»¶ä¹Ÿä¼šæ”¹å˜ç›¸å¯¹åº”hashæ”¹å˜ã€‚</p>
</blockquote>

</div>
<div class="toc-menu-container">
    <img class="icon toc-menu" alt="">
</div>

<script>
    // const toc = document.querySelector('.toc')
    // const tocmenu = document.querySelector('.toc-menu-container')
    // tocmenu.addEventListener('click', ()=>{
    //     toc.style.display === 'block' ? toc.style.display = 'none' : toc.style.display = 'block'
    // })
    const tocRight = getComputedStyle(document.documentElement).getPropertyValue('--toc-right');
    window.addEventListener('DOMContentLoaded', (event) => {
        const toc = document.querySelector('.toc')

    
        const tocmenu = document.querySelector('.toc-menu-container')

        // å¦‚æœæ²¡æœ‰ç›¸å…³hæ ‡ç­¾ï¼Œéšè—ç›®å½•
        if (!document.querySelector('h1, h2, h3, h4, h5, h6')) {
            toc.style.display = 'none'
            tocmenu.style.display = 'none'
        }

        // è§£å†³ç›´æ¥å†™å…¥cssæ–‡ä»¶çš„åª’ä½“æŸ¥è¯¢ï¼Œè€Œæ˜¯ç”¨jsæ§åˆ¶é›†ä¸­å†…å®¹å¯¼è‡´æ ·å¼å¤±æ•ˆçš„æ–¹æ³•
        const mediaQuery = window.matchMedia('(max-width: 1200px)')

        function handleTableOfContentsDisplay(e) {
            if (e.matches) { // If media query matches
                // toc.style.display = 'none'
                toc.style.right = '-100%'
                toc.style.transition = 'right .5s ease-in-out'
            } else {
                // toc.style.right = '20px'
                toc.style.right = tocRight
            }
        }
        //è¿è¡Œæ—¶è°ƒç”¨
        handleTableOfContentsDisplay(mediaQuery)
        // ç»‘å®šåª’ä½“æŸ¥è¯¢äº‹ä»¶ç›‘å¬
        mediaQuery.addListener(handleTableOfContentsDisplay)


        const img = document.querySelector('.toc-menu')
        let timer
        tocmenu.addEventListener('click', () => {
            tocmenu.classList.add('scale-up-center')
            toc.style.right.includes('%') ? toc.style.right = tocRight : toc.style.right = '-100%'
            // å¼‚æ­¥ç§»é™¤
            // if(timer) clearTimeout(timer)
            timer = setTimeout(() => {
                tocmenu.classList.remove('scale-up-center')
            }, 500)
            // img.classList.toggle('active')
            // if(img.classList.contains('active')){
            //     img.style.maskImage = "url('../../../source/css/icon/arrow-right.svg')"
            // }
        })
    })
</script>


<!-- å¼•å…¥tocbot -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        tocbot.init({
            tocSelector: '.toc',
            contentSelector: '.post-body',
            listClass: 'toc-list', //toc olåˆ—è¡¨classå
            linkClass: 'toc-link', //li ä¸­aæ ‡ç­¾çš„classå
            headingSelector: 'h1 ,h2, h3, h4, h5',
            collapseDepth: '6',
            // isCollapsedClass: 'is-collapsed',
        });
    });
</script>
</div>

<script>
    // View a list of images.
    // Note: All images within the container will be found by calling `element.querySelectorAll('img')`.
    const gallery = new Viewer(document.querySelector('.post-body'), {
        slideOnTouch: true,
        toolbar: {
            zoomIn: 1,
            zoomOut: 1,
            oneToOne: 0,
            reset: 1,
            prev: {
                show: 1,
                size: 'large'
            },
            play: {
                show: 0,
                // size: 'large',
            },
            next: {
                show: 1,
                size: 'large'
            },
            rotateLeft: 0,
            rotateRight: 0,
            flipHorizontal: 0,
            flipVertical: 0,
        },
    })
    // Then, show one image by click it, or call `gallery.show()`.
</script>

<!-- <script>
    const mdImg = document.querySelectorAll('.post-content p img')
    const imgPreviewMask = document.querySelector('.image-preview-mask')
    const imgPreview = document.querySelector('#img-preview')
    window.addEventListener('DOMContentLoaded', ()=>{
        console.log(mdImg, imgPreview)
    })
    mdImg.forEach(item => {
        item.addEventListener('click', () => {
            imgPreviewMask.style.display = 'block'
            imgPreview.classList.add('image-preview');
            imgPreview.style.backgroundImage = `url(${item.src})`;

        })
    })

    imgPreviewMask.addEventListener('click', ()=>{
        imgPreview.classList.remove('image-preview')
        imgPreviewMask.style.display = 'none'
    })

</script> -->

<script>
    window.onload = detectors();
</script>
    <div class="post-footer">
    <div class="h-line-primary"></div>
    <nav class="post-nav">
        <div class="prev-item">
           
                <div class="icon arrow-left"></div>
                <div class="post-link">
                    <a href="/posts/angular-ng/">Prev</a>
                </div>
            
        </div>
        <div class="next-item">
            
                <div class="icon arrow-right"></div>
                <div class="post-link">
                  <a href="/posts/RENEW-%E6%B1%87%E6%80%BB/">Next</a>  
                </div>  
            
        </div>
    </nav>
</div>

    
      <div class="post-comment">
    
        
            <div id="vcomments"></div>
            <!-- <script>
                var META = ['nick', 'mail', 'link'];
                var meta = 'nick,mail';
                meta = meta.split(',').filter(item => {
                    return META.includes(item);
                });
                new Valine({
                    el: '#vcomments',
                    appId: '',
                    appKey: '',
                    lang: 'en',
                    placeholder: 'Say something',
                    avatar: 'mp',
                    meta: meta
                })
            </script> -->
            

                
                    
                        <div id="disqus_thread"></div>
                        <div id='tip' style="display: none; color: gray; font-style: italic; font-size: 0.9em;">" Please use a proxy to
                            use the comment function in ğŸ‡¨ğŸ‡³"</div>
                        <script>
                            /**
                            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */

                            /* var disqus_config = function () {
                                this.page.url = 'http://example.com/posts/webpack/';  // Replace PAGE_URL with your page's canonical URL variable
                                this.page.identifier = 'posts/webpack/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                                this.language = 'en'
                            }; */

                            /* (function () { // DON'T EDIT BELOW THIS LINE
                                var d = document, s = d.createElement('script');
                                s.src = 'https://http-ye1223-github-io.disqus.com/embed.js';
                                s.setAttribute('data-timestamp', +new Date());
                                (d.head || d.body).appendChild(s);
                            })(); */




                            function loadDisqus() {
                                // æ£€æµ‹æ˜¯å¦å­˜åœ¨è¯„è®º
                                if (!document.querySelector('#disqus_thread iframe')) {
                                    document.getElementById('tip').style.display = 'block'
                                } else {
                                    document.getElementById('tip').style.display = 'none'
                                }
                                // Disqus å®‰è£…ä»£ç 
                                var d = document, s = d.createElement('script');
                                s.src = 'https://http-ye1223-github-io.disqus.com/embed.js';
                                s.setAttribute('data-timestamp', +new Date());
                                (d.head || d.body).appendChild(s);
                                window.disqus_config = function () {
                                    this.page.url = 'http://example.com/posts/webpack/';
                                    this.page.identifier = 'posts/webpack/';
                                    this.language = 'en'
                                };
                                // å¦‚æœä½ å’Œæˆ‘ä¸€æ ·åœ¨ç”¨ DisqusJSï¼ŒloadDisqus() é‡Œå°±åº”è¯¥æ˜¯ DisqusJS çš„åˆå§‹åŒ–ä»£ç  new DisqusJS({...})
                            }

                            // é€šè¿‡æ£€æŸ¥ window å¯¹è±¡ç¡®è®¤æ˜¯å¦åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ
                            var runningOnBrowser = typeof window !== "undefined";
                            // é€šè¿‡æ£€æŸ¥ scroll äº‹ä»¶ API å’Œ User-Agent æ¥åŒ¹é…çˆ¬è™«
                            var isBot = runningOnBrowser && !("onscroll" in window) || typeof navigator !== "undefined" && /(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);
                            // æ£€æŸ¥å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒ IntersectionObserver API
                            var supportsIntersectionObserver = runningOnBrowser && "IntersectionObserver" in window;

                            // æ£€æµ‹
                            /* const iframeObserver = new IntersectionObserver((entries)=>{
                                if(entries[0].isIntersecting){
                                    iframeObserver.disconnect()
                                }
                            })
                            iframeObserver.observe(document.querySelector('#disqus_thread iframe')) */

                            // ä¸€ä¸ªå° hackï¼Œå°†è€—æ—¶ä»»åŠ¡åŒ…è£¹åœ¨ setTimeout(() => { }, 1) ä¸­ï¼Œå¯ä»¥æ¨è¿Ÿåˆ° Event Loop çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€ç­‰å¾…ä¸»è°ƒç”¨æ ˆæ¸…ç©ºåæ‰æ‰§è¡Œï¼Œåœ¨ç»å¤§éƒ¨åˆ†æµè§ˆå™¨ä¸­éƒ½æœ‰æ•ˆ
                            // å…¶å®è¿™ä¸ª hack æœ¬æ¥æ˜¯ç”¨äºä¼˜åŒ–éª¨æ¶å±æ˜¾ç¤ºçš„ã€‚ä¸€äº›æµè§ˆå™¨æ€»æ˜¯ç­‰ JavaScript æ‰§è¡Œå®Œäº†æ‰å¼€å§‹é¡µé¢æ¸²æŸ“ï¼Œå¯¼è‡´éª¨æ¶å±èµ·ä¸åˆ°é™ä½ FCP çš„ä¼˜åŒ–æ•ˆæœï¼Œæ‰€ä»¥é€šè¿‡ hack å°†è€—æ—¶å‡½æ•°æ”¾åˆ°éª¨æ¶å±æ¸²æŸ“å®Œæˆåå†è¿›è¡Œã€‚
                            setTimeout(function () {
                                if (!isBot && supportsIntersectionObserver) {
                                    // å½“å‰ç¯å¢ƒä¸æ˜¯çˆ¬è™«ã€å¹¶ä¸”æµè§ˆå™¨å…¼å®¹ IntersectionObserver API
                                    var disqus_observer = new IntersectionObserver(function (entries) {
                                        // å½“å‰è§†çª—ä¸­å·²å‡ºç° Disqus è¯„è®ºæ¡†æ‰€åœ¨ä½ç½®
                                        if (entries[0].isIntersecting) {
                                            // åŠ è½½ Disqus
                                            loadDisqus();
                                            // åœæ­¢å½“å‰çš„ Observer
                                            disqus_observer.disconnect();
                                        }
                                    }, { threshold: [0] });
                                    // è®¾ç½®è®© Observer è§‚å¯Ÿ #disqus_thread å…ƒç´ 
                                    disqus_observer.observe(document.getElementById('disqus_thread'));
                                } else {
                                    // å½“å‰ç¯å¢ƒæ˜¯çˆ¬è™«ã€æˆ–å½“å‰æµè§ˆå™¨å…¶ä¸å…¼å®¹ IntersectionObserver API
                                    // ç›´æ¥åŠ è½½ Disqus
                                    loadDisqus();
                                }
                            }, 1)
                        </script>
                        <noscript>Please enable JavaScript to view the <a
                                target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                        



</div>
     
  
</article>
        </div>
      </div>
      <div class="footer">
    <div class="flex-container">
        <div class="footer-text">
            
            
            
               Â©ï¸<a target="_blank" rel="noopener" href="https://github.com/ye1223 ">Levy Liu</a> | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/zoeingwingkei/frame/">Frame.</a>
                
        </div>
    </div>
</div>


        <!-- æç¤ºè¯ -->

        <div class="tip-toast">
          <!-- <img class="close" src=`${location.origin}icon/close-btn.svg` alt=""> -->
          <img class="close" src="https://ye1223.github.io/icon/close-btn.svg" alt="">
          <p>You'd better use a PROXY to enhance your browsing experience</p>
        </div>

        <!-- åˆ›å»ºtoastæç¤ºæ¡† -->
        <script>
          window.addEventListener('DOMContentLoaded', () => {
            // const tipToast = document.createElement('div')
            // tipToast.innerHTML = `<p>You'd better use a PROXY to enhance your browser experience</p>`
            // tipToast.classList.add('tip-toast')
            // document.body.appendChild(tipToast)

            const tipToast = document.querySelector('.tip-toast')
            const closeIcon = document.querySelector('.tip-toast .close')
            let timer = null

            // sessionStorageæ˜¯å¦æœ‰tipToastï¼ˆç”¨äºè·¨é¡µé¢åˆ¤æ–­ï¼‰
            // if(sessionStorage.getItem('tipToast')){
            //   // æœ‰çš„è¯--è®¾ä¸ºfalse
            //   sessionStorage.setItem('tipToast', false)
            // } else {
            //   sessionStorage.setItem('tipToast', true)
            // }
            sessionStorage.getItem('tipToast') ? sessionStorage.setItem('tipToast', false) : sessionStorage.setItem('tipToast', true)

            if (sessionStorage.getItem('tipToast') === 'false') {
              tipToast.style.display = 'none'
              return

            } else {
              // å¼€å§‹å‘¼å‡ºtip
              tipToast.style.right = '10px'
              tipToast.style.transition = 'right .5s ease-in-out'

              // æ—¶é—´åˆ°äº†éšè—tip
              timer = setTimeout(() => {
                tipToast.style.right = '-100%'
                tipToast.style.transition = 'right .5s ease-in-out'
                sessionStorage.setItem('tipToast', false)
              }, 30000)
            }

            closeIcon.addEventListener('click', () => {
              tipToast.style.right = '-100%'
              tipToast.style.transition = 'right .5s ease-in-out'
              timer = null
              sessionStorage.setItem('tipToast', false)
            })


          })
        </script>

        <!-- mermaidè¯­æ³•æ”¯æŒ -->
        
          <!-- <script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script> -->
          <!-- <script src='https://cdn.jsdelivr.net/npm/mermaid@7.1.2/dist/mermaid.min.js'></script> -->
          <script src='https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.1.2/mermaid.min.js'></script>
          <script>
            if (window.mermaid) {
              mermaid.initialize({ theme: 'forest' });
            }
          </script>
          
            <!-- highlight.js csræ¸²æŸ“ -->
            <!-- <script src="https://cdn.jsdelivr.net/npm/highlightjs"></script>
            <script src="https://cdn.jsdelivr.net/npm/highlightjs-vue"></script>
            <script>
              hljs.registerLanguage("vue", window.hljsDefineVue);
              hljs.initHighlightingOnLoad();
            </script> -->

  </div>

  
    <div class="search-popup">
    <div class="search-popup-overlay">  
    </div>
    <div class="search-popup-window" >
        <div class="search-header">
            <div class="search-input-container">
              <input autocomplete="off" autocapitalize="off" maxlength="80"
                     placeholder="Search Anything" spellcheck="false"
                     type="search" class="search-input">
            </div>
            <div class="search-close-btn">
                <div class="icon close-btn"></div>
            </div>
        </div>
        <div class="search-result-container">
        </div>
    </div>
</div>

<script>
    const searchConfig = {
        path             : "/search.xml",
        top_n_per_article: "1",
        unescape         : "false",
        trigger: "auto",
        preload: "false"
    }
</script>
<!-- <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.min.js"></script>
<script src="/js/search.js"></script>
      

</body>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5NWC5DVZN8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5NWC5DVZN8');
</script>

</html>